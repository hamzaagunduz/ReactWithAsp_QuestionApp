import{a as b,b as v,r as _,C as g,j as e,ab as C,ac as S,ad as k,f as B,ae as D,af as y,ag as w}from"./index-CBFzb6A4.js";import{A as I}from"./AdminLayout-Y3raOaej.js";import"./index-CiReyqcp.js";const E="_examsManagementContainer_17ffb_1",G="_header_17ffb_15",A="_tabs_17ffb_49",L="_tabButton_17ffb_63",H="_active_17ffb_95",P="_listContainer_17ffb_129",Y="_formContainer_17ffb_131",T="_listHeader_17ffb_145",z="_actions_17ffb_175",F="_searchGroup_17ffb_185",R="_addButton_17ffb_225",U="_examGrid_17ffb_263",O="_examCard_17ffb_275",M="_examImage_17ffb_307",K="_imagePlaceholder_17ffb_337",V="_examInfo_17ffb_347",$="_examActions_17ffb_381",q="_actionButton_17ffb_395",J="_deleteButton_17ffb_435",Q="_subjectTable_17ffb_459",W="_tableHeader_17ffb_471",X="_colOrder_17ffb_487",Z="_colName_17ffb_495",ee="_colActions_17ffb_503",ae="_tableBody_17ffb_511",se="_tableRow_17ffb_521",ne="_orderControls_17ffb_553",te="_formHeader_17ffb_637",le="_backButton_17ffb_665",oe="_formGroup_17ffb_715",ce="_imageUpload_17ffb_775",re="_imagePreview_17ffb_813",ie="_removeImage_17ffb_833",de="_uploadPlaceholder_17ffb_865",me="_fileInput_17ffb_889",ue="_formActions_17ffb_909",fe="_cancelButton_17ffb_927",he="_saveButton_17ffb_929",xe="_emptyState_17ffb_985",a={examsManagementContainer:E,header:G,tabs:A,tabButton:L,active:H,listContainer:P,formContainer:Y,listHeader:T,actions:z,searchGroup:F,addButton:R,examGrid:U,examCard:O,examImage:M,imagePlaceholder:K,examInfo:V,examActions:$,actionButton:q,deleteButton:J,subjectTable:Q,tableHeader:W,colOrder:X,colName:Z,colActions:ee,tableBody:ae,tableRow:se,orderControls:ne,formHeader:te,backButton:le,formGroup:oe,imageUpload:ce,imagePreview:re,removeImage:ie,uploadPlaceholder:de,fileInput:me,formActions:ue,cancelButton:fe,saveButton:he,emptyState:xe},je=({onSelectExam:s,onViewSubjects:t,onAddExam:r})=>{const i=b(),{options:c,status:o,error:f}=v(n=>n.exam),[d,u]=_.useState("");_.useEffect(()=>{i(g())},[i]);const h=n=>{window.confirm("Bu sınavı ve tüm Derslarını silmek istediğinize emin misiniz?")&&i(C(n))},m=(c==null?void 0:c.filter(n=>{var j;return(j=n==null?void 0:n.name)==null?void 0:j.toLowerCase().includes(d.toLowerCase())}))||[];return e.jsxs("div",{className:a.listContainer,children:[e.jsxs("div",{className:a.listHeader,children:[e.jsx("h2",{children:"Tüm Sınavlar"}),e.jsxs("div",{className:a.actions,children:[e.jsxs("div",{className:a.searchGroup,children:[e.jsx("input",{type:"text",placeholder:"Sınav ara...",value:d,onChange:n=>u(n.target.value)}),e.jsx("i",{className:"fas fa-search"})]}),e.jsxs("button",{className:a.addButton,onClick:r,children:[e.jsx("i",{className:"fas fa-plus"})," Yeni Sınav Ekle"]})]})]}),o==="loading"?e.jsx("p",{children:"Yükleniyor..."}):f?e.jsxs("p",{children:["Hata: ",f]}):e.jsx("div",{className:a.examGrid,children:m.map(n=>e.jsxs("div",{className:a.examCard,children:[e.jsx("div",{className:a.examImage,children:e.jsx("div",{className:a.imagePlaceholder,children:e.jsx("i",{className:"fas fa-book"})})}),e.jsxs("div",{className:a.examInfo,children:[e.jsx("h3",{children:n.name}),e.jsx("p",{children:new Date(n.year).toLocaleDateString()})]}),e.jsxs("div",{className:a.examActions,children:[e.jsxs("button",{className:a.actionButton,onClick:()=>s(n),children:[e.jsx("i",{className:"fas fa-edit"})," Düzenle"]}),e.jsxs("button",{className:a.actionButton,onClick:()=>t(n),children:[e.jsx("i",{className:"fas fa-list"})," Dersleri Gör"]}),e.jsxs("button",{className:`${a.actionButton} ${a.deleteButton}`,onClick:()=>h(n.examID),children:[e.jsx("i",{className:"fas fa-trash"})," Sil"]})]})]},n.examID))}),!o&&m.length===0&&e.jsxs("div",{className:a.emptyState,children:[e.jsx("i",{className:"fas fa-book-open"}),e.jsx("p",{children:"Gösterilecek sınav bulunamadı"}),e.jsx("button",{className:a.addButton,onClick:r,children:"Yeni Sınav Ekle"})]})]})},_e=({exam:s,onBack:t,onComplete:r})=>{const i=b(),[c,o]=_.useState({examID:(s==null?void 0:s.examID)||0,name:(s==null?void 0:s.name)||"",year:(s==null?void 0:s.year)||new Date().toISOString()}),f=u=>{const{name:h,value:m}=u.target;o(n=>({...n,[h]:m}))},d=async u=>{u.preventDefault(),s?(await i(S(c)),alert("Sınav başarıyla güncellendi!")):(await i(k(c)),alert("Yeni sınav başarıyla eklendi!")),r()};return e.jsxs("div",{className:a.formContainer,children:[e.jsxs("div",{className:a.formHeader,children:[e.jsxs("button",{className:a.backButton,onClick:t,children:[e.jsx("i",{className:"fas fa-arrow-left"})," Geri"]}),e.jsx("h2",{children:s?"Sınavı Düzenle":"Yeni Sınav Ekle"})]}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Sınav Adı"}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:f,placeholder:"YKS, ALES, KPSS...",required:!0})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Sınav Yılı"}),e.jsx("input",{type:"datetime-local",name:"year",value:c.year.slice(0,16),onChange:f,required:!0})]}),e.jsxs("div",{className:a.formActions,children:[e.jsx("button",{type:"button",className:a.cancelButton,onClick:t,children:"İptal"}),e.jsx("button",{type:"submit",className:a.saveButton,children:s?"Güncelle":"Sınav Ekle"})]})]})]})},be=({exam:s,onSelectSubject:t,onAddSubject:r,onBack:i})=>{const c=b(),{courses:o,status:f,error:d}=v(l=>l.courses),[u,h]=_.useState("");_.useEffect(()=>{s!=null&&s.examID&&c(B(s.examID))},[c,s==null?void 0:s.examID]);const m=l=>{window.confirm("Bu Dersyu silmek istediğinize emin misiniz?")&&c(D(l)).unwrap().then(()=>{alert("Ders başarıyla silindi!")}).catch(x=>{alert("Silme işlemi başarısız: "+x)})},n=(l,x)=>{const p=o.findIndex(N=>N.courseID===l);x==="up"&&p===0||x==="down"&&p===o.length-1||([...o],alert("Sıra güncellendi! (API entegrasyonu yapılmalı)"))},j=o.filter(l=>{var x;return(x=l.name)==null?void 0:x.toLowerCase().includes(u.toLowerCase())});return f==="loading"?e.jsx("div",{className:a.listContainer,children:"Yükleniyor..."}):d?e.jsxs("div",{className:a.listContainer,children:["Hata: ",d]}):e.jsxs("div",{className:a.listContainer,children:[e.jsxs("div",{className:a.listHeader,children:[e.jsxs("div",{children:[e.jsxs("button",{className:a.backButton,onClick:i,children:[e.jsx("i",{className:"fas fa-arrow-left"})," Geri"]}),e.jsxs("h2",{children:[s==null?void 0:s.name," Dersler"]})]}),e.jsxs("div",{className:a.actions,children:[e.jsxs("div",{className:a.searchGroup,children:[e.jsx("input",{type:"text",placeholder:"Ders ara...",value:u,onChange:l=>h(l.target.value)}),e.jsx("i",{className:"fas fa-search"})]}),e.jsxs("button",{className:a.addButton,onClick:r,children:[e.jsx("i",{className:"fas fa-plus"})," Yeni Ders Ekle"]})]})]}),e.jsxs("div",{className:a.subjectTable,children:[e.jsxs("div",{className:a.tableHeader,children:[e.jsx("div",{className:a.colOrder,children:"Sıra"}),e.jsx("div",{className:a.colName,children:"Ders Adı"}),e.jsx("div",{className:a.colActions,children:"İşlemler"})]}),e.jsx("div",{className:a.tableBody,children:j.map((l,x)=>e.jsxs("div",{className:a.tableRow,children:[e.jsx("div",{className:a.colOrder,children:e.jsxs("div",{className:a.orderControls,children:[e.jsx("button",{onClick:()=>n(l.courseID,"up"),disabled:x===0,children:e.jsx("i",{className:"fas fa-arrow-up"})}),e.jsx("span",{children:x+1}),e.jsx("button",{onClick:()=>n(l.courseID,"down"),disabled:x===o.length-1,children:e.jsx("i",{className:"fas fa-arrow-down"})})]})}),e.jsx("div",{className:a.colName,children:l.name}),e.jsxs("div",{className:a.colActions,children:[e.jsxs("button",{className:a.actionButton,onClick:()=>t(l),children:[e.jsx("i",{className:"fas fa-edit"})," Düzenle"]}),e.jsxs("button",{className:`${a.actionButton} ${a.deleteButton}`,onClick:()=>m(l.courseID),children:[e.jsx("i",{className:"fas fa-trash"})," Sil"]})]})]},l.courseID))})]}),j.length===0&&e.jsxs("div",{className:a.emptyState,children:[e.jsx("i",{className:"fas fa-book"}),e.jsx("p",{children:"Bu sınava ait Ders bulunamadı"}),e.jsx("button",{className:a.addButton,onClick:r,children:"Yeni Konu Ekle"})]})]})},pe=({exam:s,subject:t,onBack:r,onComplete:i})=>{const c=b(),[o,f]=_.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",iconURL:(t==null?void 0:t.iconURL)||"assets/courses/default.png",examID:s.examID}),d=h=>{const{name:m,value:n}=h.target;f(j=>({...j,[m]:n}))},u=async h=>{h.preventDefault();const m={...o,...t&&{courseID:t.courseID}};try{t?(await c(y(m)).unwrap(),alert("Ders başarıyla güncellendi!")):(await c(w(m)).unwrap(),alert("Yeni Ders başarıyla eklendi!")),i()}catch(n){console.error("Kurs oluşturulamadı:",n),alert("Bir hata oluştu: "+n)}};return e.jsxs("div",{className:a.formContainer,children:[e.jsxs("div",{className:a.formHeader,children:[e.jsxs("button",{className:a.backButton,onClick:r,children:[e.jsx("i",{className:"fas fa-arrow-left"})," Geri"]}),e.jsx("h2",{children:t?"Dersyu Düzenle":"Yeni Ders Ekle"}),e.jsx("div",{className:a.examInfo,children:e.jsx("span",{children:s.name})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Ders Adı*"}),e.jsx("input",{type:"text",name:"name",value:o.name,onChange:d,placeholder:"Matematik, Fizik, Biyoloji...",required:!0})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Açıklama"}),e.jsx("textarea",{name:"description",value:o.description,onChange:d,placeholder:"Ders hakkında açıklama",rows:"3"})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"İkon URL"}),e.jsx("div",{className:a.iconPreviewGroup,children:e.jsx("input",{type:"text",name:"iconURL",value:o.iconURL,onChange:d,placeholder:"assets/courses/icon.png"})}),e.jsx("p",{className:a.hint,children:"Önerilen ikon boyutu: 100x100px. Varsayılan ikonlar: assets/courses/mat.png, bio.png, chem.png, history.png"})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"İlişkili Sınav"}),e.jsxs("div",{className:a.examCard,children:[e.jsx("div",{className:a.examImage,children:s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.name}):e.jsx("div",{className:a.imagePlaceholder,children:e.jsx("i",{className:"fas fa-book"})})}),e.jsxs("div",{className:a.examInfo,children:[e.jsx("h3",{children:s.name}),e.jsx("p",{children:s.description})]})]})]}),e.jsxs("div",{className:a.formActions,children:[e.jsx("button",{type:"button",className:a.cancelButton,onClick:r,children:"İptal"}),e.jsx("button",{type:"submit",className:a.saveButton,children:t?"Güncelle":"Ders Ekle"})]})]})]})},Ce=()=>{const[s,t]=_.useState("list"),[r,i]=_.useState(null),[c,o]=_.useState(null),f=()=>{i(null),t("examForm")},d=l=>{i(l),t("examForm")},u=l=>{i(l),t("subjectList")},h=()=>{o(null),t("subjectForm")},m=l=>{o(l),t("subjectForm")},n=()=>{t("list")},j=()=>{t("subjectList")};return e.jsx(I,{children:e.jsxs("div",{className:a.examsManagementContainer,children:[e.jsxs("div",{className:a.header,children:[e.jsx("h1",{children:"Sınav Yönetimi"}),e.jsx("p",{children:"YKS, ALES gibi sınavları ve konularını yönetin"})]}),e.jsx("div",{className:a.content,children:s==="list"?e.jsx(je,{onSelectExam:d,onViewSubjects:u,onAddExam:f}):s==="examForm"?e.jsx(_e,{exam:r,onBack:n,onComplete:n}):s==="subjectList"?e.jsx(be,{exam:r,onSelectSubject:m,onAddSubject:h,onBack:n}):e.jsx(pe,{exam:r,subject:c,onBack:j,onComplete:j})})]})})};export{Ce as default};
