import{a as k,u as S,r as i,b as y,o as P,j as e,p as C,q as M}from"./index-CBFzb6A4.js";import{f as E,L as z,R as D}from"./Leftbar-DNCBpAyt.js";const T="/assets/human-CAR2QVAv.png",R=()=>{const d=k(),v=S(),[N,c]=i.useState(!1),[l,x]=i.useState({current:"",new:"",confirm:""}),[a,o]=i.useState({}),[p,j]=i.useState(""),u=60,f=2e4,{data:s,status:A,error:L}=y(r=>r.statistic.profileStats);i.useEffect(()=>{d(P())},[d]);const g=()=>{C(),v("/login")},t=r=>{const{name:n,value:m}=r.target;x(h=>({...h,[n]:m})),a[n]&&o(h=>({...h,[n]:""}))},w=()=>{const r={};return l.current||(r.current="Mevcut şifre gereklidir"),l.new?l.new.length<6&&(r.new="Şifre en az 6 karakter olmalıdır"):r.new="Yeni şifre gereklidir",l.new!==l.confirm&&(r.confirm="Şifreler eşleşmiyor"),o(r),Object.keys(r).length===0},b=async r=>{if(r.preventDefault(),w())try{await d(M({oldPassword:l.current,newPassword:l.new})).unwrap(),j("Şifreniz başarıyla değiştirildi!"),setTimeout(()=>{c(!1),j(""),x({current:"",new:"",confirm:""}),o({})},2e3)}catch(n){const m=(n==null?void 0:n.error)||"Şifre değiştirme başarısız";o({general:m})}};return e.jsxs("div",{className:"col-12 col-md-6 position-relative",children:[N&&e.jsx("div",{className:"password-modal-backdrop",children:e.jsxs("div",{className:"password-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Şifre Değiştir"}),e.jsx("button",{className:"close-btn",onClick:()=>c(!1),children:"×"})]}),e.jsx("div",{className:"modal-body",children:p?e.jsx("div",{className:"success-message",children:p}):e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Mevcut Şifre"}),e.jsx("input",{type:"password",name:"current",value:l.current,onChange:t,className:a.current?"input-error":"",placeholder:"Mevcut şifrenizi girin"}),a.current&&e.jsx("div",{className:"error-text",children:a.current})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Yeni Şifre"}),e.jsx("input",{type:"password",name:"new",value:l.new,onChange:t,className:a.new?"input-error":"",placeholder:"En az 6 karakter"}),a.new&&e.jsx("div",{className:"error-text",children:a.new})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Yeni Şifre (Tekrar)"}),e.jsx("input",{type:"password",name:"confirm",value:l.confirm,onChange:t,className:a.confirm?"input-error":"",placeholder:"Şifrenizi tekrar girin"}),a.confirm&&e.jsx("div",{className:"error-text",children:a.confirm})]}),a.general&&e.jsx("div",{className:"error-text general-error",children:a.general}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>c(!1),children:"İptal"}),e.jsx("button",{type:"submit",className:"submit-btn",children:"Kaydet"})]})]})})]})}),e.jsxs("div",{className:"profile-container",children:[e.jsxs("section",{className:"profile-block profile-top",children:[e.jsx("div",{className:"block-header",children:"Profil Bilgileri"}),e.jsxs("div",{className:"profile-content",children:[e.jsxs("div",{className:"user-details",children:[e.jsx("h5",{className:"user-name",children:s==null?void 0:s.userName}),e.jsxs("p",{className:"user-info",children:[" E-posta: ",e.jsxs("span",{children:[s==null?void 0:s.email," 📧"]})]}),e.jsxs("p",{className:"user-info",children:["Can: ",e.jsx("span",{children:(s==null?void 0:s.lives)>100?e.jsx("img",{src:E,alt:"Sonsuz",className:"forever-icon"}):e.jsxs(e.Fragment,{children:[s==null?void 0:s.lives,"❤️"]})})]}),e.jsxs("p",{className:"user-info",children:["Elmas: ",e.jsxs("span",{children:[s==null?void 0:s.diamond,"💎"]})]})]}),e.jsx("div",{className:"profile-image",children:e.jsx("img",{src:(s==null?void 0:s.imageURL)||T,alt:"Profil Resmi",className:"profile-pic"})})]})]}),e.jsxs("section",{className:"profile-block",children:[e.jsx("div",{className:"block-header",children:"İstatistikler"}),e.jsxs("div",{className:"profile-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-title",children:"Günlük Seri:"}),e.jsx("span",{className:"stat-value",children:(s==null?void 0:s.consecutiveDays)||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-title",children:"Toplam Puan:"}),e.jsx("span",{className:"stat-value",children:(s==null?void 0:s.totalScore)||0})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-title",children:"Mevcut Lig:"}),e.jsx("span",{className:"stat-value",children:(s==null?void 0:s.league)||"Bronz"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-title",children:"Kusursuz Testler:"}),e.jsx("span",{className:"stat-value",children:s==null?void 0:s.perfectTestsCompleted})]})]})]}),e.jsxs("section",{className:"profile-block",children:[e.jsx("div",{className:"block-header",children:"Başarılar"}),e.jsxs("div",{className:"achievements",children:[e.jsx("div",{className:"achievement-item",children:e.jsxs("div",{className:"progress-container",children:[e.jsx("div",{className:"profile-progress-bar",children:e.jsx("div",{className:"profile-progress-bar-fill",style:{width:`${Math.min(((s==null?void 0:s.consecutiveDays)||0)/u*100,100)}%`}})}),e.jsxs("div",{className:"achievement-info",children:[e.jsx("span",{className:"achievement-title",children:"İstikrarlı"}),e.jsxs("span",{className:"achievement-progress",children:[(s==null?void 0:s.consecutiveDays)||0,"/",u]})]})]})}),e.jsx("div",{className:"achievement-item",children:e.jsxs("div",{className:"progress-container",children:[e.jsx("div",{className:"profile-progress-bar",children:e.jsx("div",{className:"profile-progress-bar-fill",style:{width:`${Math.min(((s==null?void 0:s.totalScore)||0)/f*100,100)}%`}})}),e.jsxs("div",{className:"achievement-info",children:[e.jsx("span",{className:"achievement-title",children:"Bilgili"}),e.jsxs("span",{className:"achievement-progress",children:[(s==null?void 0:s.totalScore)||0,"/",f]})]})]})})]})]}),e.jsxs("div",{className:"profile-actions",children:[e.jsx("button",{className:"action-btn edit-profile",onClick:()=>c(!0),children:"Şifre Değiştir"}),e.jsx("button",{className:"action-btn logout",onClick:g,children:"Çıkış Yap"})]})]})]})},O=()=>e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row ",children:[e.jsx(z,{}),e.jsx(R,{}),e.jsx(D,{})]})});export{O as default};
