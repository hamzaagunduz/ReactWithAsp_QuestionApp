import{j as e,a as b,b as v,r as h,a1 as y,a2 as P,a3 as N,a4 as C,a5 as D,a6 as S,a7 as G,a8 as T}from"./index-DTAF6WUO.js";import{A}from"./AdminLayout-BWdCuD8L.js";import"./index-CmSRxqsV.js";const k="_shopManagementContainer_1mnh9_1",B="_header_1mnh9_15",E="_tabs_1mnh9_49",L="_tabButton_1mnh9_61",F="_active_1mnh9_93",q="_productListContainer_1mnh9_127",$="_filterSection_1mnh9_141",w="_filterGroup_1mnh9_159",U="_stats_1mnh9_199",H="_productGrid_1mnh9_209",M="_productCard_1mnh9_223",R="_productHeader_1mnh9_253",z="_productType_1mnh9_271",O="_productActions_1mnh9_289",Y="_editButton_1mnh9_299",J="_deleteButton_1mnh9_301",K="_productImage_1mnh9_357",Q="_imagePlaceholder_1mnh9_387",V="_productInfo_1mnh9_409",W="_productDescription_1mnh9_435",X="_productDetails_1mnh9_449",Z="_price_1mnh9_461",ee="_duration_1mnh9_473",ne="_colorBlue_1mnh9_493",te="_colorPurple_1mnh9_503",ae="_colorGold_1mnh9_513",re="_colorOrange_1mnh9_523",se="_productFormContainer_1mnh9_567",oe="_formGroup_1mnh9_593",ie="_formRow_1mnh9_653",ce="_formActions_1mnh9_665",le="_cancelButton_1mnh9_683",de="_saveButton_1mnh9_685",n={shopManagementContainer:k,header:B,tabs:E,tabButton:L,active:F,productListContainer:q,filterSection:$,filterGroup:w,stats:U,productGrid:H,productCard:M,productHeader:R,productType:z,productActions:O,editButton:Y,deleteButton:J,productImage:K,imagePlaceholder:Q,productInfo:V,productDescription:W,productDetails:X,price:Z,duration:ee,colorBlue:ne,colorPurple:te,colorGold:ae,colorOrange:re,productFormContainer:se,formGroup:oe,formRow:ie,formActions:ce,cancelButton:le,saveButton:de},me={blue:n.colorBlue,purple:n.colorPurple,gold:n.colorGold,orange:n.colorOrange},ue=({product:t,onEdit:s,onDelete:i})=>{const o=me[t.color]||"",l=t.type==="diamond"?"üíé Elmas":"‚≠ê Premium";return e.jsxs("div",{className:`${n.productCard} ${o}`,children:[e.jsx(pe,{productType:l,onEdit:s,onDelete:i}),e.jsx(he,{imageUrl:t.imageUrl,name:t.name}),e.jsx(xe,{name:t.name,description:t.description,price:t.price,durationInDays:t.durationInDays,isDiamond:t.type==="diamond",diamondAmount:t.diamondAmount,bonusPercentage:t.bonusPercentage,priceInTL:t.priceInTL})]})},pe=({productType:t,onEdit:s,onDelete:i})=>e.jsxs("div",{className:n.productHeader,children:[e.jsx("div",{className:n.productType,children:t}),e.jsxs("div",{className:n.productActions,children:[e.jsx("button",{onClick:s,className:n.editButton,children:"D√ºzenle"}),e.jsx("button",{onClick:i,className:n.deleteButton,children:"Sil"})]})]}),he=({imageUrl:t,name:s})=>e.jsx("div",{className:n.productImage,children:t?e.jsx("img",{src:`/${t}`,alt:s}):e.jsx("div",{className:n.imagePlaceholder,children:"√úr√ºn G√∂rseli"})}),xe=({name:t,description:s,price:i,durationInDays:o,isDiamond:l,diamondAmount:a,bonusPercentage:p,priceInTL:x})=>e.jsxs("div",{className:n.productInfo,children:[e.jsx("h3",{children:t}),e.jsx("p",{className:n.productDescription,children:s}),e.jsx("div",{className:n.productDetails,children:l?e.jsx(e.Fragment,{children:e.jsx(je,{diamondAmount:a,bonusPercentage:p,priceInTL:x})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:n.price,children:e.jsxs("strong",{children:[i," üíé"]})}),o>0&&e.jsxs("div",{className:n.duration,children:[o," g√ºn"]})]})})]}),je=({diamondAmount:t,bonusPercentage:s,priceInTL:i})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:n.diamondAmount,children:e.jsxs("strong",{children:[t," üíé"]})}),s>0&&e.jsxs("div",{className:n.bonus,children:["+%",s," bonus"]}),e.jsxs("div",{className:n.price,children:["‚Ç∫",i]})]}),_e=({onEditProduct:t})=>{const s=b(),{allItems:i,allItemsStatus:o,allItemsError:l}=v(r=>r.shop),{items:a,status:p,error:x}=v(r=>r.diamondPackItem),[_,g]=h.useState([]),[c,f]=h.useState("all");h.useEffect(()=>{s(y()),s(P())},[s]),h.useEffect(()=>{const r=i.map(d=>({...d,type:"premium",durationInDays:30,itemType:"shopItem",uniqueId:`shop-${d.id}`})),j=a.map(d=>({...d,id:d.id,name:d.name,description:d.description,priceInTL:d.priceInTL,imageUrl:d.imageUrl,type:"diamond",durationInDays:0,itemType:"diamondPackItem",uniqueId:`diamond-${d.id}`})),I=[...r,...j];g(I)},[i,a]);const m=_.filter(r=>c==="all"?!0:c==="diamond"?r.type==="diamond":c==="premium"?r.type==="premium":!0);console.log(m);const u=(r,j)=>{if(window.confirm("Bu √ºr√ºn√º silmek istediƒüinize emin misiniz?")){const I=j==="diamondPackItem"?N(r):C(r);s(I).unwrap().then(()=>alert("√úr√ºn ba≈üarƒ±yla silindi!")).catch(d=>alert(`Hata: ${d}`))}};return e.jsxs("div",{className:n.productListContainer,children:[e.jsxs("div",{className:n.filterSection,children:[e.jsxs("div",{className:n.filterGroup,children:[e.jsx("label",{children:"√úr√ºn Tipi:"}),e.jsxs("select",{value:c,onChange:r=>f(r.target.value),children:[e.jsx("option",{value:"all",children:"T√ºm √úr√ºnler"}),e.jsx("option",{value:"diamond",children:"Elmas Paketleri"}),e.jsx("option",{value:"premium",children:"Premium √úr√ºnler"})]})]}),e.jsxs("div",{className:n.stats,children:["Toplam ",e.jsx("strong",{children:m.length})," √ºr√ºn listeleniyor"]})]}),e.jsx("div",{className:n.productGrid,children:m.map(r=>e.jsx(ue,{product:r,onEdit:()=>t(r),onDelete:()=>u(r.id,r.itemType)},r.uniqueId))}),(o==="loading"||p==="loading")&&e.jsx("p",{children:"Y√ºkleniyor..."}),o==="failed"&&e.jsxs("p",{children:["Hata (Shop): ",l]}),p==="failed"&&e.jsxs("p",{children:["Hata (Diamond): ",x]})]})},ge=({product:t,onComplete:s})=>{const i=b(),o=v(m=>m.shop),l=v(m=>m.diamondPackItem),[a,p]=h.useState({id:0,name:"",description:"",price:0,color:"blue",imageUrl:"",durationInDays:30,type:"premium",diamondAmount:0,bonusPercentage:0,priceInTL:0}),x=a.type==="diamond"?l.createStatus:o.createStatus,_=a.type==="diamond"?l.updateStatus:o.updateStatus,g=a.type==="diamond"?l.createError||l.updateError:o.createError||o.updateError;h.useEffect(()=>{t&&p({...a,...t,diamondAmount:t.diamondAmount||0,bonusPercentage:t.bonusPercentage||0,priceInTL:t.priceInTL||0})},[t]);const c=m=>{const{name:u,value:r}=m.target;p(j=>({...j,[u]:["price","durationInDays","diamondAmount","bonusPercentage","priceInTL"].includes(u)?parseInt(r)||0:r}))},f=async m=>{m.preventDefault();try{let u;if(a.type==="diamond"){const r={id:a.id,name:a.name,description:a.description,imageUrl:a.imageUrl,diamondAmount:a.diamondAmount,bonusPercentage:a.bonusPercentage,priceInTL:a.priceInTL};u=t?D(r):S(r)}else{const r={id:a.id,name:a.name,description:a.description,price:a.price,color:a.color,imageUrl:a.imageUrl,durationInDays:a.durationInDays};u=t?G(r):T(r)}await i(u).unwrap(),alert(`√úr√ºn ba≈üarƒ±yla ${t?"g√ºncellendi":"eklendi"}!`),s()}catch(u){alert(`Hata: ${u.message||u}`)}};return e.jsxs("div",{className:n.productFormContainer,children:[e.jsx("h2",{children:t?"√úr√ºn√º D√ºzenle":"Yeni √úr√ºn Ekle"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"√úr√ºn Tipi"}),e.jsxs("select",{name:"type",value:a.type,onChange:c,required:!0,children:[e.jsx("option",{value:"premium",children:"Premium √úr√ºn"}),e.jsx("option",{value:"diamond",children:"Elmas Paketi"})]})]}),e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"√úr√ºn Adƒ±"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:c,required:!0})]}),e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"A√ßƒ±klama"}),e.jsx("textarea",{name:"description",value:a.description,onChange:c,rows:"3",required:!0})]}),e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"G√∂rsel URL"}),e.jsx("input",{type:"text",name:"imageUrl",value:a.imageUrl,onChange:c})]}),a.type==="diamond"&&e.jsxs("div",{className:n.formRow,children:[e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"Elmas Miktarƒ±"}),e.jsx("input",{type:"number",name:"diamondAmount",value:a.diamondAmount,onChange:c,min:"0",required:!0})]}),e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"Bonus Y√ºzdesi (%)"}),e.jsx("input",{type:"number",name:"bonusPercentage",value:a.bonusPercentage,onChange:c,min:"0",max:"100",required:!0})]}),e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"Fiyat (TL)"}),e.jsx("input",{type:"number",name:"priceInTL",value:a.priceInTL,onChange:c,min:"0",required:!0})]})]}),a.type==="premium"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n.formRow,children:[e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"Fiyat (Elmas)"}),e.jsx("input",{type:"number",name:"price",value:a.price,onChange:c,min:"0",required:!0})]}),e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"Renk"}),e.jsxs("select",{name:"color",value:a.color,onChange:c,required:!0,children:[e.jsx("option",{value:"blue",children:"Mavi"}),e.jsx("option",{value:"purple",children:"Mor"}),e.jsx("option",{value:"gold",children:"Altƒ±n"}),e.jsx("option",{value:"orange",children:"Turuncu"})]})]})]}),e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"S√ºre (G√ºn)"}),e.jsx("input",{type:"number",name:"durationInDays",value:a.durationInDays,onChange:c,min:"0",required:!0})]})]}),e.jsxs("div",{className:n.formActions,children:[e.jsx("button",{type:"button",className:n.cancelButton,onClick:s,children:"ƒ∞ptal"}),e.jsx("button",{type:"submit",className:n.saveButton,disabled:x==="loading"||_==="loading",children:x==="loading"||_==="loading"?"ƒ∞≈üleniyor...":t?"G√ºncelle":"√úr√ºn Ekle"})]}),g&&e.jsxs("p",{className:n.errorText,children:["Hata: ",g]})]})]})},be=()=>{const[t,s]=h.useState("list"),[i,o]=h.useState(null),l=p=>{o(p),s("form")},a=()=>{o(null),s("list")};return e.jsx(A,{children:e.jsxs("div",{className:n.shopManagementContainer,children:[e.jsxs("div",{className:n.header,children:[e.jsx("h1",{children:"Maƒüaza Y√∂netimi"}),e.jsx("p",{children:"Elmas ve Premium √ºr√ºnlerinizi y√∂netin"})]}),e.jsxs("div",{className:n.tabs,children:[e.jsx("button",{className:`${n.tabButton} ${t==="list"?n.active:""}`,onClick:()=>s("list"),children:"√úr√ºn Listesi"}),e.jsx("button",{className:`${n.tabButton} ${t==="form"?n.active:""}`,onClick:()=>{o(null),s("form")},children:i?"√úr√ºn√º D√ºzenle":"Yeni √úr√ºn Ekle"})]}),e.jsx("div",{className:n.content,children:t==="list"?e.jsx(_e,{onEditProduct:l}):e.jsx(ge,{product:i,onComplete:a})})]})})};export{be as default};
