import{r as i,j as e,u as P,a as A,b as T,q as I,v as M,d as R}from"./index-DTAF6WUO.js";import{b as F,c as O}from"./index-CmSRxqsV.js";import{L as H,R as _}from"./Leftbar-B0EjVjn2.js";const $=({isOpen:n,onClose:t,description:a,videoLink:l})=>{const[o,c]=i.useState(!1);if(!n)return null;const r=()=>{c(u=>!u)};return e.jsx("div",{className:"topic-modal-overlay",onClick:t,children:e.jsxs("div",{className:"topic-modal",onClick:u=>u.stopPropagation(),children:[e.jsx("h5",{children:"Konu Özeti"}),e.jsx("div",{className:"topic-modal-video",children:e.jsx("iframe",{width:"100%",height:"315",src:l,title:"YouTube video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsx("button",{className:"topic-description-toggle-btn",onClick:r,children:o?"Konu Açıklamasını Gizle":"Konu Açıklamasını Göster"}),o&&e.jsx("div",{className:"topic-modal-description",children:e.jsx("p",{children:a})}),e.jsx("button",{className:"topic-modal-close-btn",onClick:t,children:"Kapat"})]})})},q=({isOpen:n,onClose:t,description:a})=>n?e.jsx("div",{className:"modal-backdrop_live",onClick:t,children:e.jsxs("div",{className:"modal-content_live",onClick:l=>l.stopPropagation(),children:[e.jsx("h5",{children:"Canınız Kalmadı"}),e.jsx("p",{children:a}),e.jsx("button",{className:"btn btn-secondary mt-3",onClick:t,children:"Kapat"})]})}):null,W=({title:n,description:t,buttonText:a,onClick:l,color:o})=>(console.log(o),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsx("div",{className:"card mid-card-style",style:{backgroundColor:o},children:e.jsxs("div",{className:"card-body text-center test-card-body",children:[e.jsx("h5",{children:n}),e.jsx("button",{className:"btn btn-secondary card-button",onClick:l,children:a})]})})})),Y=({title:n,description:t,buttonText:a,onClick:l,color:o})=>e.jsx("div",{className:"col-lg-4 col-md-6 mb-4",children:e.jsx("div",{className:"TestModalCard-container ",style:{backgroundColor:`${o}`},onClick:l,children:e.jsxs("div",{className:"TestModalCard-content",children:[e.jsx("h6",{className:"TestModalCard-title",children:n}),e.jsx("p",{className:"TestModalCard-description",children:t}),e.jsx("div",{className:"TestModalCard-buttonArea",children:e.jsxs("button",{className:"TestModalCard-button",children:[e.jsx(F,{size:14,style:{marginRight:"6px"}}),a]})})]})})}),J=({isOpen:n,onClose:t,tests:a,color:l,onNavigate:o})=>!n||!a?null:e.jsx("div",{className:"TestModal-backdrop",onClick:t,children:e.jsxs("div",{className:"TestModal-content",onClick:c=>c.stopPropagation(),children:[e.jsx("button",{className:"TestModal-closeButton",onClick:t,children:e.jsx(O,{size:18})}),e.jsx("h5",{className:"TestModal-title mb-4",children:"Tüm Testler"}),e.jsx("div",{className:"row",children:a.map((c,r)=>e.jsx(Y,{title:c.title,description:c.description,buttonText:"Başla",color:l,onClick:()=>o(c.testID)},r))})]})}),Q=({courseID:n})=>{const t=P(),a=A(),[l,o]=i.useState(n),{topics:c,statusTopics:r,errorTopics:u}=T(s=>s.topic),h=T(s=>s.layout.healthResult),v=(h==null?void 0:h.lives)??0,[L,N]=i.useState(!1),[g,x]=i.useState(null),[w,G]=i.useState("red"),[S,C]=i.useState(null),k=["rgb(88, 204, 2)","rgba(28, 176, 246, 0.8)","rgb(139, 0, 255)","rgb(255, 69, 0)","rgb(30, 144, 255)","rgb(255, 215, 0)"];i.useEffect(()=>{a(I())},[]),i.useEffect(()=>{l&&a(M(l))},[l,a]);const j=i.useCallback(()=>{o(null),t(-1)},[t]),z=i.useCallback(s=>{v<=0?(x(null),N(!0)):t(`/train/${s}`)},[t,v]),D=(s,d)=>{s&&s.length>0&&(x(s),G(d))},K=()=>{x(null)};if(r==="loading")return e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r==="failed")return e.jsxs("div",{className:"col-12 col-md-6 position-relative",children:[e.jsx("button",{className:"back-button",onClick:j}),e.jsxs("div",{className:"alert alert-danger mt-3",children:[u||"Error loading topics",e.jsx("button",{className:"btn btn-sm btn-primary ms-2",onClick:()=>a(M(l)),children:"Tekrar Deneyin"})]})]});if(r==="succeeded"&&(!c||c.length===0))return e.jsxs("div",{className:"col-12 col-md-6 position-relative",children:[e.jsx("button",{className:"back-button",onClick:j}),e.jsx("div",{className:"alert alert-info mt-3",children:"Konular Henüz Eklenmedi"})]});const B=s=>k[s%k.length];return e.jsxs("div",{className:"col-12 col-md-6 position-relative",children:[e.jsx("button",{className:"back-button",onClick:j}),c.map((s,d)=>{var y;const b=B(d),E=S===d,f=((y=s.testGroups)==null?void 0:y.filter(m=>{var p;return((p=m.tests)==null?void 0:p.length)>=0}))||[];return e.jsxs("div",{className:"lesson-container",children:[e.jsx("div",{className:"d-flex flex-column align-items-center",children:e.jsxs("div",{className:"mid-top-card",style:{backgroundColor:b},children:[e.jsx("div",{className:"card-body d-flex flex-column flex-grow-1",children:e.jsx("p",{className:"card-text",children:s.name})}),e.jsx("div",{className:"mid-top-card-button",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>C(d),children:"Konu Özeti"})})]})}),e.jsx("div",{className:"card-container",children:e.jsx("div",{className:"container mt-4 mb-4",children:e.jsx("div",{className:"row",children:f.length>0?f.map((m,p)=>e.jsx(W,{title:m.title,description:m.description||"Tıklayarak testleri görüntüleyin",buttonText:"Başla",color:b,onClick:()=>D(m.tests,b)},m.testGroupID||p)):e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"alert alert-warning",children:"Bu konu için henüz test bulunmamaktadır."})})})})}),e.jsx($,{isOpen:E,onClose:()=>C(null),description:s.description,videoLink:s.videoLink})]},s.topicID||d)}),e.jsx(q,{isOpen:L,onClose:()=>N(!1),description:"Canınız kalmadı. Lütfen bir süre bekleyin veya can satın alın."}),e.jsx(J,{isOpen:!!g,onClose:K,tests:g,color:w,onNavigate:z})]})},Z=()=>{const{courseID:n}=R();return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row ",children:[e.jsx(H,{}),e.jsx(Q,{courseID:n}),e.jsx(_,{})]})})};export{Z as default};
