import{r as h,j as e,a as x,b as j,a1 as z,a2 as N}from"./index-CBFzb6A4.js";import{A as g}from"./AdminLayout-Y3raOaej.js";import"./index-CiReyqcp.js";const f="_userManagementContainer_17zbu_1",S="_header_17zbu_15",C="_content_17zbu_49",B="_userListSection_17zbu_61",y="_userDetailSection_17zbu_63",k="_placeholder_17zbu_81",L="_filterSection_17zbu_101",$="_filterGroup_17zbu_115",D="_searchGroup_17zbu_139",T="_userTable_17zbu_165",w="_tableHeader_17zbu_175",A="_tableBody_17zbu_197",I="_tableRow_17zbu_209",H="_banned_17zbu_239",G="_userInfo_17zbu_249",P="_avatar_17zbu_261",M="_userName_17zbu_287",U="_userEmail_17zbu_297",V="_statusBadge_17zbu_309",E="_typeBadge_17zbu_311",K="_active_17zbu_327",R="_inactive_17zbu_347",F="_premium_17zbu_357",Y="_free_17zbu_369",O="_diamondCount_17zbu_379",q="_profileHeader_17zbu_397",J="_profileAvatar_17zbu_415",Q="_userStatus_17zbu_441",W="_statusCard_17zbu_455",X="_statusLabel_17zbu_469",Z="_statusValue_17zbu_481",ee="_statsSection_17zbu_525",ae="_statsGrid_17zbu_533",se="_statCard_17zbu_547",te="_statIcon_17zbu_565",ne="_statValue_17zbu_575",le="_statLabel_17zbu_589",ie="_diamondContainer_17zbu_601",ce="_currentDiamonds_17zbu_615",re="_diamondIcon_17zbu_633",oe="_diamondLabel_17zbu_641",de="_diamondControls_17zbu_651",ue="_controlGroup_17zbu_659",me="_actionButtons_17zbu_697",_e="_addButton_17zbu_707",be="_removeButton_17zbu_709",he="_diamondHistory_17zbu_765",ve="_banButton_17zbu_825",pe="_premiumButton_17zbu_827",xe="_deleteButton_17zbu_829",je="_actionsContainer_17zbu_903",ze="_actionButton_17zbu_697",Ne="_actionMenu_17zbu_945",ge="_menuItem_17zbu_971",fe="_ban_17zbu_239",Se="_unban_17zbu_1021",Ce="_addPremium_17zbu_1029",Be="_removePremium_17zbu_1037",ye="_leagueBadge_17zbu_1057",ke="_bronze_17zbu_1071",Le="_silver_17zbu_1081",$e="_gold_17zbu_1091",De="_diamond_17zbu_379",Te="_testStats_17zbu_1113",we="_testStat_17zbu_1113",Ae="_league_17zbu_1057",Ie="_diamondValue_17zbu_1481",He="_errorMessage_17zbu_1515",Ge="_loadingPulse_17zbu_1",a={userManagementContainer:f,header:S,content:C,userListSection:B,userDetailSection:y,placeholder:k,filterSection:L,filterGroup:$,searchGroup:D,userTable:T,tableHeader:w,tableBody:A,tableRow:I,banned:H,userInfo:G,avatar:P,userName:M,userEmail:U,statusBadge:V,typeBadge:E,active:K,inactive:R,premium:F,free:Y,diamondCount:O,profileHeader:q,profileAvatar:J,userStatus:Q,statusCard:W,statusLabel:X,statusValue:Z,statsSection:ee,statsGrid:ae,statCard:se,statIcon:te,statValue:ne,statLabel:le,diamondContainer:ie,currentDiamonds:ce,diamondIcon:re,diamondLabel:oe,diamondControls:de,controlGroup:ue,actionButtons:me,addButton:_e,removeButton:be,diamondHistory:he,banButton:ve,premiumButton:pe,deleteButton:xe,actionsContainer:je,actionButton:ze,actionMenu:Ne,menuItem:ge,ban:fe,unban:Se,addPremium:Ce,removePremium:Be,delete:"_delete_17zbu_829",leagueBadge:ye,bronze:ke,silver:Le,gold:$e,diamond:De,testStats:Te,testStat:we,league:Ae,diamondValue:Ie,errorMessage:He,loadingPulse:Ge},Pe=({user:s,onActionComplete:m})=>{const[c,o]=h.useState(!1),d=_=>{o(!1);let u="";switch(_){case"ban":u=s.status==="banned"?`${s.name} kullanıcısının banı kaldırıldı!`:`${s.name} kullanıcısı banlandı!`;break;case"premium":u=s.type==="premium"?`${s.name} kullanıcısının premium üyeliği kaldırıldı!`:`${s.name} kullanıcısı premium üye yapıldı!`;break;case"delete":u=`${s.name} kullanıcısı silindi!`;break}alert(u)};return e.jsxs("div",{className:a.actionsContainer,children:[e.jsx("button",{className:a.actionButton,onClick:()=>o(!c),children:"•••"}),c&&e.jsxs("div",{className:a.actionMenu,children:[e.jsx("button",{className:`${a.menuItem} ${s.status==="banned"?a.unban:a.ban}`,onClick:()=>d("ban"),children:s.status==="banned"?"Banı Kaldır":"Hesabı Banla"}),e.jsx("button",{className:`${a.menuItem} ${s.type==="premium"?a.removePremium:a.addPremium}`,onClick:()=>d("premium"),children:s.type==="premium"?"Premiumu Kaldır":"Premium Yap"}),e.jsx("button",{className:`${a.menuItem} ${a.delete}`,onClick:()=>d("delete"),children:"Hesabı Sil"})]})]})},Me=({onSelectUser:s})=>{const m=x(),{users:c,status:o,error:d}=j(t=>t.appUser),[_,u]=h.useState([]),[r,v]=h.useState({status:"all",type:"all",search:""});h.useEffect(()=>{m(z())},[m]),h.useEffect(()=>{if(!c||c.length===0){u([]);return}let i=c.map(n=>({id:n.userId,name:`${n.firstName} ${n.surName}`,email:n.email,status:n.ban?"banned":"active",type:n.diamond>500?"premium":"free",diamonds:n.diamond,rawData:n}));if(r.status!=="all"&&(i=i.filter(n=>r.status==="banned"?n.rawData.ban:!n.rawData.ban)),r.type!=="all"&&(i=i.filter(n=>n.type===r.type)),r.search){const n=r.search.toLowerCase();i=i.filter(p=>p.name.toLowerCase().includes(n)||p.email.toLowerCase().includes(n))}u(i)},[r,c]);const l=(t,i)=>{v(n=>({...n,[t]:i}))},b=t=>{if(!t)return"?";const i=t.split(" ");return i.length>1?`${i[0].charAt(0)}${i[1].charAt(0)}`:t.charAt(0)};return e.jsxs("div",{className:a.userListContainer,children:[e.jsxs("div",{className:a.filterSection,children:[e.jsxs("div",{className:a.filterGroup,children:[e.jsx("label",{children:"Durum:"}),e.jsxs("select",{value:r.status,onChange:t=>l("status",t.target.value),children:[e.jsx("option",{value:"all",children:"Tümü"}),e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"banned",children:"Banlı"})]})]}),e.jsxs("div",{className:a.filterGroup,children:[e.jsx("label",{children:"Tip:"}),e.jsxs("select",{value:r.type,onChange:t=>l("type",t.target.value),children:[e.jsx("option",{value:"all",children:"Tümü"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"free",children:"Ücretsiz"})]})]}),e.jsx("div",{className:a.searchGroup,children:e.jsx("input",{type:"text",placeholder:"Kullanıcı ara...",value:r.search,onChange:t=>l("search",t.target.value)})})]}),o==="loading"&&e.jsx("div",{className:a.loadingContainer,children:e.jsx("p",{children:"Kullanıcılar yükleniyor..."})}),o==="failed"&&e.jsx("div",{className:a.errorContainer,children:e.jsxs("p",{children:["Hata: ",d||"Kullanıcılar alınamadı"]})}),o==="succeeded"&&e.jsxs("div",{className:a.userTable,children:[e.jsxs("div",{className:a.tableHeader,children:[e.jsx("div",{children:"Kullanıcı"}),e.jsx("div",{children:"Durum"}),e.jsx("div",{children:"Lig"}),e.jsx("div",{children:"Testler"}),e.jsx("div",{children:"Elmas"}),e.jsx("div",{children:"İşlemler"})]}),e.jsx("div",{className:a.tableBody,children:_.length>0?_.map(t=>{var i;return e.jsxs("div",{className:`${a.tableRow} ${t.status==="banned"?a.banned:""}`,onClick:()=>s(t.rawData),children:[e.jsxs("div",{className:a.userInfo,children:[e.jsx("div",{className:a.avatar,children:b(t.name)}),e.jsx("div",{children:e.jsx("div",{className:a.userName,children:t.name})})]}),e.jsx("div",{children:e.jsx("span",{className:`${a.statusBadge} ${a[t.status]}`,children:t.status==="banned"?"Banlı":"Aktif"})}),e.jsx("div",{children:e.jsx("span",{className:`${a.leagueBadge} ${a[((i=t.rawData.league)==null?void 0:i.toLowerCase())||"bronze"]}`,children:t.rawData.league||"Bronze"})}),e.jsxs("div",{className:a.testStats,children:[e.jsxs("div",{className:a.testStat,children:[e.jsx("span",{children:"📝"})," ",t.rawData.totalTestsCompleted||0]}),e.jsxs("div",{className:a.testStat,children:[e.jsx("span",{children:"⭐"})," ",t.rawData.perfectTestsCompleted||0]}),e.jsxs("div",{className:a.testStat,children:[e.jsx("span",{children:"📊"})," ",t.rawData.averageScore||0,"%"]})]}),e.jsxs("div",{className:a.diamondCount,children:[e.jsx("span",{children:"💎"})," ",t.diamonds]}),e.jsx("div",{children:e.jsx(Pe,{user:t.rawData})})]},t.id)}):e.jsx("div",{className:a.noResults,children:e.jsx("p",{children:"Filtrenizle eşleşen kullanıcı bulunamadı"})})})]})]})},Ue=({user:s})=>{var v;const m=x(),c=j(l=>l.appUser.banOperation);if(!s)return e.jsx("div",{className:a.userProfile,children:e.jsx("div",{className:a.loadingContainer,children:e.jsx("p",{children:"Kullanıcı bilgileri yükleniyor..."})})});const o=l=>l?new Date(l).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Yok",d=`${s.firstName||""} ${s.surName||""}`.trim(),_=[{label:"Toplam Puan",value:s.totalScore||0,icon:"🏆"},{label:"Tamamlanan Test",value:s.totalTestsCompleted||0,icon:"📝"},{label:"Mükemmel Test",value:s.perfectTestsCompleted||0,icon:"⭐"},{label:"Ortalama Skor",value:s.averageScore?`${s.averageScore}%`:"0%",icon:"📊"}],u=[{label:"Günlük Seri",value:s.consecutiveDays||0,icon:"🔥"},{label:"Geçici Seri",value:s.consecutiveDaysTemp||0,icon:"⏱️"},{label:"Son Test Tarihi",value:o(s.lastTestDate),icon:"📅"},{label:"Lig",value:s.league||"Bronze",icon:"🏅"}],r=()=>{m(N({userId:s.userId,banStatus:!s.ban}))};return e.jsxs("div",{className:a.userProfile,children:[e.jsxs("div",{className:a.profileHeader,children:[e.jsx("div",{className:a.profileAvatar,children:d?d.charAt(0):"?"}),e.jsxs("div",{children:[e.jsx("h2",{children:d||"İsimsiz Kullanıcı"}),e.jsx("p",{className:a.userEmail,children:s.email||"Email yok"}),s.lastLifeAddedTime&&e.jsxs("p",{className:a.joinDate,children:["Kayıt Tarihi: ",o(s.lastLifeAddedTime)]})]})]}),e.jsxs("div",{className:a.userStatus,children:[e.jsxs("div",{className:a.statusCard,children:[e.jsx("div",{className:a.statusLabel,children:"Hesap Durumu"}),e.jsx("div",{className:`${a.statusValue} ${s.ban?a.banned:a.active}`,children:s.ban?"Banlı Hesap":"Aktif Hesap"})]}),e.jsxs("div",{className:a.statusCard,children:[e.jsx("div",{className:a.statusLabel,children:"Elmas Miktarı"}),e.jsxs("div",{className:a.diamondValue,children:["💎 ",s.diamond||0]})]}),e.jsxs("div",{className:a.statusCard,children:[e.jsx("div",{className:a.statusLabel,children:"Lig"}),e.jsx("div",{className:`${a.statusValue} ${a.league} ${a[((v=s.league)==null?void 0:v.toLowerCase())||"bronze"]}`,children:s.league||"Bronze"})]})]}),e.jsxs("div",{className:a.statsSection,children:[e.jsx("h3",{children:"Test İstatistikleri"}),e.jsx("div",{className:a.statsGrid,children:_.map((l,b)=>e.jsxs("div",{className:a.statCard,children:[e.jsx("div",{className:a.statIcon,children:l.icon}),e.jsx("div",{className:a.statValue,children:l.value}),e.jsx("div",{className:a.statLabel,children:l.label})]},b))})]}),e.jsxs("div",{className:a.statsSection,children:[e.jsx("h3",{children:"Seri ve Aktivite"}),e.jsx("div",{className:a.statsGrid,children:u.map((l,b)=>e.jsxs("div",{className:a.statCard,children:[e.jsx("div",{className:a.statIcon,children:l.icon}),e.jsx("div",{className:a.statValue,children:l.value}),e.jsx("div",{className:a.statLabel,children:l.label})]},b))})]}),e.jsxs("div",{className:a.actionSection,children:[e.jsx("h3",{children:"Hesap İşlemleri"}),e.jsx("div",{className:a.actionButtons,children:e.jsx("button",{className:a.banButton,onClick:r,disabled:c.status==="loading",children:c.status==="loading"?"İşleniyor...":s.ban?"Banı Kaldır":"Hesabı Banla"})}),c.error&&e.jsxs("div",{className:a.errorMessage,children:["Hata: ",c.error]})]})]})},Re=()=>{const[s,m]=h.useState(null),c=o=>{m(o)};return e.jsx(g,{children:e.jsxs("div",{className:a.userManagementContainer,children:[e.jsxs("div",{className:a.header,children:[e.jsx("h1",{children:"Kullanıcı Yönetimi"}),e.jsx("p",{children:"Tüm kullanıcıları görüntüleyin ve yönetin"})]}),e.jsxs("div",{className:a.content,children:[e.jsx("div",{className:a.userListSection,children:e.jsx(Me,{onSelectUser:c})}),e.jsx("div",{className:a.userDetailSection,children:s?e.jsx(Ue,{user:s}):e.jsx("div",{className:a.placeholder,children:e.jsx("p",{children:"Bir kullanıcı seçiniz"})})})]})]})})};export{Re as default};
