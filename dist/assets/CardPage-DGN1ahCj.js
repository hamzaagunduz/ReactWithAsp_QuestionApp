import{R as q,j as e,a as b,r as c,b as N,x as S,f as M,c as f,y as w}from"./index-CBFzb6A4.js";import{L as Q,R}from"./Leftbar-DNCBpAyt.js";import{P as _}from"./index-Cm-aM20k.js";const B=q.memo(({category:n,onClick:i})=>e.jsxs("button",{className:"btn btn-category mb-3 text-center d-flex flex-column align-items-center",onClick:()=>i(n.courseID),children:[e.jsx("img",{src:`/assets/${n.iconURL}`,alt:n.name,className:"category-image mb-2",style:{width:"50px",height:"50px"}}),e.jsx("span",{children:n.name})," "]}));B.propTypes={category:_.shape({courseID:_.number.isRequired,iconURL:_.string.isRequired,name:_.string.isRequired}).isRequired,onClick:_.func.isRequired};const $="_quizModalOverlay_l2vm4_5",F="_quizModalContent_l2vm4_33",A="_quizModalClose_l2vm4_57",D="_trainContainer_l2vm4_91",O="_progressBarTrain_l2vm4_107",L="_progressBarFillTrain_l2vm4_127",P="_completed_l2vm4_147",E="_trainTitle_l2vm4_155",H="_questionCounter_l2vm4_173",Y="_questionCard_l2vm4_187",G="_questionText_l2vm4_209",K="_optionsContainer_l2vm4_233",U="_option_l2vm4_233",X="_correct_l2vm4_323",J="_correctAnimation_l2vm4_1",V="_wrong_l2vm4_337",W="_wrongAnimation_l2vm4_1",Z="_selected_l2vm4_351",ee="_correctIndicator_l2vm4_361",se="_incorrectIndicator_l2vm4_363",ne="_quizNavigation_l2vm4_389",te="_navButton_l2vm4_405",oe="_previousButton_l2vm4_459",ie="_nextButton_l2vm4_467",ae="_finishButton_l2vm4_475",le="_noQuizContainer_l2vm4_515",re="_closeButton_l2vm4_525",s={quizModalOverlay:$,quizModalContent:F,quizModalClose:A,trainContainer:D,progressBarTrain:O,progressBarFillTrain:L,completed:P,trainTitle:E,questionCounter:H,questionCard:Y,questionText:G,optionsContainer:K,option:U,correct:X,correctAnimation:J,wrong:V,wrongAnimation:W,selected:Z,correctIndicator:ee,incorrectIndicator:se,quizNavigation:ne,navButton:te,previousButton:oe,nextButton:ie,finishButton:ae,noQuizContainer:le,closeButton:re},ce=({courseId:n,onClose:i})=>{const d=b(),[t,x]=c.useState(0),[u,m]=c.useState(null),[r,v]=c.useState(!1),{quizFromFavorites:o,quizFavStatus:a}=N(l=>l.flashCard);c.useEffect(()=>{d(S({courseId:n}))},[d,n]);const h=(o==null?void 0:o.questions)||[],p=h[t]||null,k=l=>{r||(m(l),v(!0))},y=()=>{t<h.length-1&&(x(t+1),m(null),v(!1))},z=()=>{t>0&&(x(t-1),m(null),v(!1))},T=(t+1)/h.length*100;return a==="loading"?e.jsx("div",{className:s.quizModalOverlay,onClick:i,children:e.jsx("div",{className:s.quizModalContent,onClick:l=>l.stopPropagation(),children:e.jsx("div",{className:"d-flex justify-content-center align-items-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Yükleniyor..."})})})})}):e.jsx("div",{className:s.quizModalOverlay,onClick:i,children:e.jsxs("div",{className:s.quizModalContent,onClick:l=>l.stopPropagation(),children:[e.jsx("button",{className:s.quizModalClose,onClick:i,children:"×"}),h.length>0&&p?e.jsxs("div",{className:s.trainContainer,children:[e.jsx("div",{className:s.progressBarTrain,children:e.jsx("div",{className:`${s.progressBarFillTrain} ${t===h.length-1?s.completed:""}`,style:{width:`${T}%`}})}),e.jsxs("div",{className:s.questionCard,children:[e.jsx("div",{className:s.questionText,children:p.questionText}),e.jsx("div",{className:s.optionsContainer,children:(p.options||[]).map((l,I)=>{const j=l.flashCardID===p.correctAnswerId,g=(u==null?void 0:u.flashCardID)===l.flashCardID;let C=s.option;return r?j?C+=` ${s.correct}`:g&&!j&&(C+=` ${s.wrong}`):g&&(C+=` ${s.selected}`),e.jsxs("button",{className:C,onClick:()=>k(l),disabled:r,children:[l.answerText,r&&j&&e.jsx("span",{className:s.correctIndicator,children:"✓"}),r&&g&&!j&&e.jsx("span",{className:s.incorrectIndicator,children:"X"})]},I)})}),e.jsxs("div",{className:s.quizNavigation,children:[e.jsx("button",{className:`${s.navButton} ${s.previousButton}`,onClick:z,disabled:t===0,children:"← Önceki Soru"}),t<h.length-1?e.jsx("button",{className:`${s.navButton} ${s.nextButton}`,onClick:y,disabled:!r,children:"Sonraki Soru →"}):e.jsx("button",{className:s.finishButton,onClick:i,children:"Testi Bitir"})]})]})]}):e.jsxs("div",{className:s.noQuizContainer,children:[e.jsx("h4",{children:"Quiz Oluşturulamadı"}),e.jsx("p",{children:"Yeterli sayıda favori kart bulunamadı."}),e.jsx("button",{className:s.closeButton,onClick:i,children:"Kapat"})]})]})})},de=({flashcards:n,courseId:i})=>{console.log(i);const[d,t]=c.useState(null),[x,u]=c.useState(!1),m=a=>{t(a)},r=()=>{t(null)},v=()=>{t(a=>(a+1)%n.length)},o=()=>{t(a=>(a-1+n.length)%n.length)};return e.jsxs("div",{className:"duo-container",children:[n.length>0&&e.jsx("div",{className:"duo-quiz-button-container",children:e.jsx("button",{className:"duo-quiz-button",onClick:()=>u(!0),children:"Quiz Başlat"})}),n.length>0?e.jsx("div",{className:"duo-flashcard-list",children:n.map((a,h)=>e.jsx("div",{className:"duo-flashcard",onClick:()=>m(h),children:e.jsx("div",{className:"duo-card-face duo-front",children:e.jsx("p",{children:a.front})})},a.flashCardID))}):e.jsx("p",{className:"duo-no-cards",children:"Hiç favori kart bulunamadı."}),d!==null&&e.jsx("div",{className:"duo-modal-overlay",onClick:a=>{a.target.classList.contains("duo-modal-overlay")&&r()},children:e.jsxs("div",{className:"duo-modal-content",children:[e.jsx("button",{className:"duo-modal-close",onClick:r,children:"×"}),e.jsx("h4",{children:n[d].front}),e.jsx("p",{children:n[d].back}),e.jsxs("div",{className:"duo-modal-nav",children:[e.jsx("button",{className:"duo-nav-button",onClick:o,children:"← Geri"}),e.jsx("button",{className:"duo-nav-button",onClick:v,children:"İleri →"})]})]})}),x&&e.jsx(ce,{courseId:i,onClose:()=>u(!1)})]})},ue=q.memo(()=>{const n=b(),{courses:i,fetchStatus:d}=N(o=>o.courses),{favoriteFlashCards:t,favoriteStatus:x}=N(o=>o.flashCard),[u,m]=c.useState(null);c.useEffect(()=>{n(M())},[n]);const r=c.useCallback(()=>{n(f()),m(null)},[n]),v=c.useCallback(o=>{n(f()),m(o),n(w({courseId:o}))},[n]);return d==="loading"?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):d==="failed"?e.jsx("div",{className:"text-center mt-5 text-danger",children:"Dersler yüklenemedi. Lütfen daha sonra tekrar deneyin."}):e.jsx("div",{className:"col-12 col-md-6 position-relative",children:u?e.jsxs("div",{children:[e.jsx("button",{className:"back-button",onClick:r}),x==="succeeded"&&e.jsx(de,{flashcards:t,courseId:u}),x==="loading"&&e.jsx("div",{className:"text-center mt-4",children:e.jsx("div",{className:"spinner-border text-secondary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Yükleniyor..."})})})]}):e.jsxs("div",{className:"category-selection",children:[e.jsx("div",{className:"text-center lesson-title",children:"Hangi Dersin Ezber Kartını Görmek İstersin"}),e.jsx("div",{className:"category-list",children:i.map(o=>e.jsx(B,{category:o,onClick:v},o.courseID))})]})})}),ve=()=>e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row ",children:[e.jsx(Q,{}),e.jsx(ue,{}),e.jsx(R,{})]})});export{ve as default};
