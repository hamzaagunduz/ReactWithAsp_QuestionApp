import{a as v,r as c,b as g,j as e,G as u}from"./index-CBFzb6A4.js";import{s as y,g as C}from"./signalrService-Bn4cSkDf.js";const I=()=>{const x=v(),[a,h]=c.useState({cardHolderName:"",cardNumber:"",expireMonth:"",expireYear:"",cvc:""}),[i,p]=c.useState(null),[r,j]=c.useState(null),[t,N]=c.useState(null),{status:m,error:d}=g(s=>s.payment);c.useEffect(()=>{r&&(async()=>{await y("payhub");const n=C();r&&(n.invoke("RegisterTransaction",r),console.log("ðŸ“¡ RegisterTransaction Ã§aÄŸrÄ±ldÄ±:",r)),n.on("Receive",o=>{console.log("ðŸ“¨ SignalR MesajÄ± AlÄ±ndÄ±:",o),N(o)})})()},[r]);const l=s=>{h({...a,[s.target.name]:s.target.value})},b=async s=>{s.preventDefault();const n=await x(u(a));if(u.fulfilled.match(n)){const o=n.payload.content,f=btoa(unescape(encodeURIComponent(o)));p(`data:text/html;base64,${f}`),j(n.payload.conversationId)}};return e.jsxs("div",{className:"container mt-5",children:[e.jsx("h2",{className:"mb-4",children:"Ã–deme SayfasÄ±"}),e.jsxs("form",{onSubmit:b,className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Kart Ãœzerindeki Ä°sim"}),e.jsx("input",{type:"text",name:"cardHolderName",className:"form-control",value:a.cardHolderName,onChange:l,required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Kart NumarasÄ±"}),e.jsx("input",{type:"text",name:"cardNumber",className:"form-control",value:a.cardNumber,onChange:l,required:!0})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"Ay"}),e.jsx("input",{type:"text",name:"expireMonth",className:"form-control",value:a.expireMonth,onChange:l,required:!0})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"YÄ±l"}),e.jsx("input",{type:"text",name:"expireYear",className:"form-control",value:a.expireYear,onChange:l,required:!0})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"CVC"}),e.jsx("input",{type:"text",name:"cvc",className:"form-control",value:a.cvc,onChange:l,required:!0})]}),e.jsx("div",{className:"col-12",children:e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m==="loading",children:m==="loading"?"GÃ¶nderiliyor...":"Ã–demeyi GÃ¶nder"})})]}),d&&e.jsxs("div",{className:"alert alert-danger mt-3",children:["Hata: ",d]}),i&&e.jsxs("div",{className:"mt-5",children:[e.jsx("h5",{children:"3D Secure YÃ¶nlendirme"}),e.jsx("iframe",{title:"3D Secure",src:i,style:{width:"100%",height:"500px",border:"1px solid #ccc"}})]}),t&&e.jsxs("div",{className:"alert alert-success mt-4",children:[e.jsx("strong",{children:"Ã–deme Durumu:"})," ",t.status,e.jsx("br",{}),e.jsx("strong",{children:"Mesaj:"})," ",(t==null?void 0:t.paymentId)&&`Ã–deme ID: ${t.paymentId}`]})]})};export{I as default};
