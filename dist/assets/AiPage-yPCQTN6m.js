import{r as s,a as y,b as v,j as t,s as S}from"./index-DTAF6WUO.js";import{s as C,g as u}from"./signalrService-twUN7PzZ.js";const b=()=>{const[r,x]=s.useState(""),[o,a]=s.useState(""),[p,c]=s.useState([]),i=s.useRef(null),h=y(),{status:l,error:g}=v(e=>e.signalr);s.useEffect(()=>((async()=>{await C();const n=u();n&&(x(n.connectionId||""),n.on("ReceiveMessage",j=>{c(m=>[...m,{text:j,sender:"ai"}]),f()}))})(),()=>{const n=u();n&&n.stop()}),[]);const f=()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},d=async()=>{o.trim()===""||!r||(c(e=>[...e,{text:o,sender:"user"}]),h(S({prompt:o,connectionId:r})),a(""))};return t.jsxs("div",{style:{maxWidth:"600px",margin:"auto"},children:[t.jsx("h2",{children:"Yapay Zeka Chat"}),t.jsxs("p",{children:["Bağlantı ID: ",r&&t.jsx("code",{children:r})]}),t.jsx("div",{ref:i,style:{border:"1px solid #ccc",padding:"10px",height:"300px",overflowY:"auto",marginBottom:"10px"},children:p.map((e,n)=>t.jsxs("div",{style:{textAlign:e.sender==="user"?"right":"left"},children:[t.jsxs("strong",{children:[e.sender==="user"?"Sen":"AI",":"]})," ",e.text]},n))}),t.jsxs("div",{children:[t.jsx("input",{type:"text",value:o,onChange:e=>a(e.target.value),onKeyDown:e=>e.key==="Enter"&&d(),style:{width:"80%"}}),t.jsx("button",{onClick:d,children:"Gönder"})]}),l==="loading"&&t.jsx("p",{children:"Yanıt bekleniyor..."}),l==="failed"&&t.jsxs("p",{style:{color:"red"},children:["Hata: ",g]})]})};export{b as default};
