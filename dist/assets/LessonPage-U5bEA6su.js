import{r as i,j as e,u as P,a as I,b as T,v as R,w as M,d as A}from"./index-CBFzb6A4.js";import{b as F,c as H}from"./index-CiReyqcp.js";import{L as _,R as $}from"./Leftbar-DNCBpAyt.js";const O=({isOpen:a,onClose:t,description:l,videoLink:n})=>{const[c,o]=i.useState(!1);if(i.useEffect(()=>{a||o(!1)},[a]),!a)return null;const r=()=>{o(u=>!u)};return e.jsx("div",{className:"topic-modal-overlay",onClick:t,children:e.jsxs("div",{className:"topic-modal",onClick:u=>u.stopPropagation(),children:[e.jsx("h5",{children:"Konu Özeti"}),c?e.jsx("div",{className:"topic-description-container",children:e.jsx("div",{className:"topic-description-content",children:l})}):e.jsx("div",{className:"topic-modal-video",children:e.jsx("iframe",{width:"100%",height:"315",src:n,title:"YouTube video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),e.jsx("button",{className:"topic-description-toggle-btn",onClick:r,children:c?"Videoyu Göster":"Konu Açıklamasını Göster"}),e.jsx("button",{className:"topic-modal-close-btn",onClick:t,children:"Kapat"})]})})},V=({isOpen:a,onClose:t,description:l})=>a?e.jsx("div",{className:"modal-backdrop_live",onClick:t,children:e.jsxs("div",{className:"modal-content_live",onClick:n=>n.stopPropagation(),children:[e.jsx("h5",{children:"Canınız Kalmadı"}),e.jsx("p",{children:l}),e.jsx("button",{className:"btn btn-secondary mt-3",onClick:t,children:"Kapat"})]})}):null,W=({title:a,description:t,buttonText:l,onClick:n,color:c})=>(console.log(c),e.jsx("div",{className:"col-lg-4 col-md-6",children:e.jsx("div",{className:"card mid-card-style",style:{backgroundColor:c},children:e.jsxs("div",{className:"card-body text-center test-card-body",children:[e.jsx("h5",{children:a}),e.jsx("button",{className:"btn btn-secondary card-button",onClick:n,children:l})]})})})),Y=({title:a,description:t,buttonText:l,onClick:n,color:c})=>e.jsx("div",{className:"col-lg-4 col-md-6 mb-4",children:e.jsx("div",{className:"TestModalCard-container ",style:{backgroundColor:`${c}`},onClick:n,children:e.jsxs("div",{className:"TestModalCard-content",children:[e.jsx("h6",{className:"TestModalCard-title",children:a}),e.jsx("p",{className:"TestModalCard-description",children:t}),e.jsx("div",{className:"TestModalCard-buttonArea",children:e.jsxs("button",{className:"TestModalCard-button",children:[e.jsx(F,{size:14,style:{marginRight:"6px"}}),l]})})]})})}),q=({isOpen:a,onClose:t,tests:l,color:n,onNavigate:c})=>!a||!l?null:e.jsx("div",{className:"TestModal-backdrop",onClick:t,children:e.jsxs("div",{className:"TestModal-content",onClick:o=>o.stopPropagation(),children:[e.jsx("button",{className:"TestModal-closeButton",onClick:t,children:e.jsx(H,{size:18})}),e.jsx("h5",{className:"TestModal-title mb-4",children:"Tüm Testler"}),e.jsx("div",{className:"row",children:l.map((o,r)=>e.jsx(Y,{title:o.title,description:o.description,buttonText:"Başla",color:n,onClick:()=>c(o.testID)},r))})]})}),J=({courseID:a})=>{const t=P(),l=I(),[n,c]=i.useState(a),{topics:o,statusTopics:r,errorTopics:u}=T(s=>s.topic),h=T(s=>s.layout.healthResult),v=(h==null?void 0:h.lives)??0,[w,N]=i.useState(!1),[g,x]=i.useState(null),[L,G]=i.useState("red"),[S,C]=i.useState(null),f=["rgb(88, 204, 2)","rgba(28, 176, 246, 0.8)","rgb(139, 0, 255)","rgb(255, 69, 0)","rgb(30, 144, 255)","rgb(255, 215, 0)"];i.useEffect(()=>{l(R())},[]),i.useEffect(()=>{n&&l(M(n))},[n,l]);const j=i.useCallback(()=>{c(null),t(-1)},[t]),D=i.useCallback(s=>{v<=0?(x(null),N(!0)):t(`/train/${s}`)},[t,v]),z=(s,d)=>{s&&s.length>0&&(x(s),G(d))},E=()=>{x(null)};if(r==="loading")return e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r==="failed")return e.jsxs("div",{className:"col-12 col-md-6 position-relative",children:[e.jsx("button",{className:"back-button",onClick:j}),e.jsxs("div",{className:"alert alert-danger mt-3",children:[u||"Error loading topics",e.jsx("button",{className:"btn btn-sm btn-primary ms-2",onClick:()=>l(M(n)),children:"Tekrar Deneyin"})]})]});if(r==="succeeded"&&(!o||o.length===0))return e.jsxs("div",{className:"col-12 col-md-6 position-relative",children:[e.jsx("button",{className:"back-button",onClick:j}),e.jsx("div",{className:"alert alert-info mt-3",children:"Konular Henüz Eklenmedi"})]});const K=s=>f[s%f.length];return e.jsxs("div",{className:"col-12 col-md-6 position-relative",children:[e.jsx("button",{className:"back-button",onClick:j}),o.map((s,d)=>{var y;const b=K(d),B=S===d,k=((y=s.testGroups)==null?void 0:y.filter(m=>{var p;return((p=m.tests)==null?void 0:p.length)>=0}))||[];return e.jsxs("div",{className:"lesson-container",children:[e.jsx("div",{className:"d-flex flex-column align-items-center",children:e.jsxs("div",{className:"mid-top-card",style:{backgroundColor:b},children:[e.jsx("div",{className:"card-body d-flex flex-column flex-grow-1",children:e.jsx("p",{className:"card-text",children:s.name})}),e.jsx("div",{className:"mid-top-card-button",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>C(d),children:"Konu Özeti"})})]})}),e.jsx("div",{className:"card-container",children:e.jsx("div",{className:"container mt-4 mb-4",children:e.jsx("div",{className:"row",children:k.length>0?k.map((m,p)=>e.jsx(W,{title:m.title,description:m.description||"Tıklayarak testleri görüntüleyin",buttonText:"Başla",color:b,onClick:()=>z(m.tests,b)},m.testGroupID||p)):e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"alert alert-warning",children:"Bu konu için henüz test bulunmamaktadır."})})})})}),e.jsx(O,{isOpen:B,onClose:()=>C(null),description:s.description,videoLink:s.videoLink})]},s.topicID||d)}),e.jsx(V,{isOpen:w,onClose:()=>N(!1),description:"Canınız kalmadı. Lütfen bir süre bekleyin veya can satın alın."}),e.jsx(q,{isOpen:!!g,onClose:E,tests:g,color:L,onNavigate:D})]})},Z=()=>{const{courseID:a}=A();return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row ",children:[e.jsx(_,{}),e.jsx(J,{courseID:a}),e.jsx($,{})]})})};export{Z as default};
