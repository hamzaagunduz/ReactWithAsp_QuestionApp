import{a as K,r as n,j as e,S as re,T as de,U as ce,b as te,V as ue,W as pe,X as me,Y as he,Z as xe,_ as _e,$ as fe,C as je,f as Ie,a0 as ve,w as ge}from"./index-CBFzb6A4.js";import{A as be}from"./AdminLayout-Y3raOaej.js";import"./index-CiReyqcp.js";const Ne="_modalOverlay_7il20_5",Se="_modalContent_7il20_35",Ce="_slideIn_7il20_1",ye="_modalHeader_7il20_65",Be="_closeButton_7il20_101",ke="_scrollContainer_7il20_135",Te="_formSection_7il20_151",Ge="_formGroup_7il20_169",De="_inputLabel_7il20_185",$e="_textInput_7il20_201",Le="_textArea_7il20_203",ze="_helpText_7il20_259",Ae="_actions_7il20_273",Oe="_submitButton_7il20_293",Ee="_cancelButton_7il20_295",D={modalOverlay:Ne,modalContent:Se,slideIn:Ce,modalHeader:ye,closeButton:Be,scrollContainer:ke,formSection:Te,formGroup:Ge,inputLabel:De,textInput:$e,textArea:Le,helpText:ze,actions:Ae,submitButton:Oe,cancelButton:Ee},we=({isOpen:C,onClose:x,selectedCourseID:N})=>{const G=K(),[d,h]=n.useState({name:"",description:"",videoLink:""}),_=v=>{const{name:g,value:m}=v.target;h(u=>({...u,[g]:m}))},j=()=>{if(!d.name.trim()||!N){alert("Lütfen konu adı girin ve geçerli bir ders seçildiğinden emin olun.");return}G(re({...d,courseID:N})),x()};return C?e.jsx("div",{className:D.modalOverlay,children:e.jsxs("div",{className:D.modalContent,children:[e.jsxs("div",{className:D.modalHeader,children:[e.jsx("h2",{children:"Yeni Konu Ekle"}),e.jsx("button",{onClick:x,className:D.closeButton,children:"×"})]}),e.jsxs("div",{className:D.formSection,children:[e.jsxs("div",{className:D.formGroup,children:[e.jsx("label",{className:D.inputLabel,children:"Konu Adı*"}),e.jsx("input",{type:"text",name:"name",placeholder:"Konu adını girin",value:d.name,onChange:_,className:D.textInput})]}),e.jsxs("div",{className:D.formGroup,children:[e.jsx("label",{className:D.inputLabel,children:"Açıklama"}),e.jsx("textarea",{name:"description",placeholder:"Konu açıklaması (opsiyonel)",value:d.description,onChange:_,className:D.textArea})]}),e.jsxs("div",{className:D.formGroup,children:[e.jsx("label",{className:D.inputLabel,children:"Video Linki"}),e.jsx("input",{type:"text",name:"videoLink",placeholder:"https://ornek.com/video",value:d.videoLink,onChange:_,className:D.textInput}),e.jsx("div",{className:D.helpText,children:"YouTube, Vimeo veya diğer platformlardan link"})]})]}),e.jsxs("div",{className:D.actions,children:[e.jsx("button",{className:D.cancelButton,onClick:x,children:"İptal"}),e.jsx("button",{className:D.submitButton,onClick:j,children:"Kaydet"})]})]})}):null},He="_modalOverlay_1f0hn_5",Fe="_modalContent_1f0hn_33",qe="_fadeIn_1f0hn_1",Me="_modalHeader_1f0hn_57",Ke="_closeButton_1f0hn_87",Qe="_formSection_1f0hn_117",Ue="_sectionTitle_1f0hn_133",Re="_formGroup_1f0hn_151",Pe="_inputLabel_1f0hn_159",Ye="_textInput_1f0hn_175",Ve="_textArea_1f0hn_177",We="_selectInput_1f0hn_179",Xe="_actions_1f0hn_225",Ze="_submitButton_1f0hn_243",Je="_cancelButton_1f0hn_245",y={modalOverlay:He,modalContent:Fe,fadeIn:qe,modalHeader:Me,closeButton:Ke,formSection:Qe,sectionTitle:Ue,formGroup:Re,inputLabel:Pe,textInput:Ye,textArea:Ve,selectInput:We,actions:Xe,submitButton:Ze,cancelButton:Je},et=({isOpen:C,onClose:x,availableTopics:N=[]})=>{const G=K(),[d,h]=n.useState(""),[_,j]=n.useState(""),[v,g]=n.useState(""),[m,u]=n.useState(""),b=async()=>{const c={title:d,description:_,test:v,topicID:m?parseInt(m,10):null};await G(de(c)),x()};return C?e.jsx("div",{className:y.modalOverlay,children:e.jsxs("div",{className:y.modalContent,children:[e.jsxs("div",{className:y.modalHeader,children:[e.jsx("h2",{children:"Test Grubu Ekle"}),e.jsx("button",{className:y.closeButton,onClick:x,children:"×"})]}),e.jsxs("div",{className:y.formSection,children:[e.jsx("h3",{className:y.sectionTitle,children:"Temel Bilgiler"}),e.jsxs("div",{className:y.formGroup,children:[e.jsx("label",{className:y.inputLabel,children:"Başlık*"}),e.jsx("input",{type:"text",placeholder:"Test grubu başlığı",value:d,onChange:c=>h(c.target.value),className:y.textInput})]}),e.jsxs("div",{className:y.formGroup,children:[e.jsx("label",{className:y.inputLabel,children:"Açıklama"}),e.jsx("textarea",{placeholder:"Test grubu açıklaması (opsiyonel)",value:_,onChange:c=>j(c.target.value),className:y.textArea})]}),e.jsxs("div",{className:y.formGroup,children:[e.jsx("label",{className:y.inputLabel,children:"Test Alanı*"}),e.jsx("input",{type:"text",placeholder:"Test alanı bilgisi",value:v,onChange:c=>g(c.target.value),className:y.textInput})]})]}),e.jsxs("div",{className:y.formSection,children:[e.jsx("h3",{className:y.sectionTitle,children:"Konu Bilgileri"}),e.jsxs("div",{className:y.formGroup,children:[e.jsx("label",{className:y.inputLabel,children:"Konu Seçimi"}),e.jsxs("select",{value:m,onChange:c=>u(c.target.value),className:y.selectInput,children:[e.jsx("option",{value:"",children:"Konu seçin (opsiyonel)"}),N.map(c=>e.jsx("option",{value:c.topicID,children:c.name},c.topicID))]})]})]}),e.jsxs("div",{className:y.actions,children:[e.jsx("button",{className:y.cancelButton,onClick:x,children:"İptal"}),e.jsx("button",{className:y.submitButton,onClick:b,children:"Kaydet"})]})]})}):null},tt="_modalOverlay_c29xz_5",st="_modalContent_c29xz_33",nt="_modalHeader_c29xz_55",at="_closeButton_c29xz_85",ot="_formSection_c29xz_115",lt="_sectionTitle_c29xz_131",it="_formGroup_c29xz_149",ct="_inputLabel_c29xz_157",rt="_textArea_c29xz_173",dt="_selectInput_c29xz_175",ut="_optionInput_c29xz_177",pt="_optionGroup_c29xz_223",mt="_optionHeader_c29xz_249",ht="_optionLabel_c29xz_261",xt="_optionControls_c29xz_289",_t="_fileUpload_c29xz_309",ft="_fileUploadLabel_c29xz_317",jt="_fileInput_c29xz_327",It="_fileUploadText_c29xz_335",vt="_actions_c29xz_371",gt="_submitButton_c29xz_389",bt="_cancelButton_c29xz_391",r={modalOverlay:tt,modalContent:st,modalHeader:nt,closeButton:at,formSection:ot,sectionTitle:lt,formGroup:it,inputLabel:ct,textArea:rt,selectInput:dt,optionInput:ut,optionGroup:pt,optionHeader:mt,optionLabel:ht,optionControls:xt,fileUpload:_t,fileUploadLabel:ft,fileInput:jt,fileUploadText:It,actions:vt,submitButton:gt,cancelButton:bt},Nt=({isOpen:C,onClose:x,onSubmit:N,tests:G})=>{const d=K(),[h,_]=n.useState(""),[j,v]=n.useState(""),[g,m]=n.useState(""),[u,b]=n.useState(""),[c,i]=n.useState(""),[I,A]=n.useState(""),[E,H]=n.useState(G.length>0?G[0].testID:""),[q,R]=n.useState(""),[a,$]=n.useState(""),[l,O]=n.useState(""),[w,F]=n.useState(null),[Q,V]=n.useState(null),[U,J]=n.useState(null),[M,W]=n.useState(null),[t,S]=n.useState(null),[L,X]=n.useState(null);if(!C)return null;const se=async()=>{try{const p=new FormData;p.append("QuestionText",h),p.append("OptionA",j),p.append("OptionB",g),p.append("OptionC",u),p.append("OptionD",c),p.append("OptionE",I),p.append("TestId",E),p.append("Answer",q),p.append("FlashCardFront",a||""),p.append("FlashCardBack",l||""),w&&p.append("QuestionImage",w),Q&&p.append("OptionAImage",Q),U&&p.append("OptionBImage",U),M&&p.append("OptionCImage",M),t&&p.append("OptionDImage",t),L&&p.append("OptionEImage",L);const Z=await d(ce(p));ce.fulfilled.match(Z)?(N(),x()):alert("Soru oluşturulamadı: "+(Z.payload||"Bilinmeyen hata"))}catch(p){alert("Form gönderilirken hata oluştu: "+p.message)}},P=(p,Z,ne,ae,oe)=>e.jsx("div",{className:r.optionGroup,children:e.jsxs("div",{className:r.optionHeader,children:[e.jsx("span",{className:r.optionLabel,children:p}),e.jsxs("div",{className:r.optionControls,children:[e.jsx("input",{type:"text",placeholder:`${p} metni`,value:Z,onChange:ee=>ne(ee.target.value),className:r.optionInput}),e.jsx("div",{className:r.fileUpload,children:e.jsxs("label",{className:r.fileUploadLabel,children:[e.jsx("input",{type:"file",accept:"image/*",onChange:ee=>oe(ee.target.files[0]),className:r.fileInput}),e.jsx("span",{className:r.fileUploadText,children:ae?"✔ Değiştir":"+ Resim Ekle"})]})})]})]})});return e.jsx("div",{className:r.modalOverlay,children:e.jsxs("div",{className:r.modalContent,children:[e.jsxs("div",{className:r.modalHeader,children:[e.jsx("h2",{children:"Yeni Soru Ekle"}),e.jsx("button",{className:r.closeButton,onClick:x,children:"×"})]}),e.jsxs("div",{className:r.formSection,children:[e.jsx("h3",{className:r.sectionTitle,children:"Soru Bilgileri"}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{className:r.inputLabel,children:"Test Grubu"}),e.jsx("select",{value:E,onChange:p=>H(p.target.value),className:r.selectInput,children:G.map(p=>e.jsx("option",{value:p.testID,children:p.title},p.testID))})]}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{className:r.inputLabel,children:"Soru Metni"}),e.jsx("textarea",{placeholder:"Soru metnini buraya yazın...",value:h,onChange:p=>_(p.target.value),rows:3,className:r.textArea})]}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{className:r.inputLabel,children:"Soru Resmi"}),e.jsx("div",{className:r.fileUpload,children:e.jsxs("label",{className:r.fileUploadLabel,children:[e.jsx("input",{type:"file",accept:"image/*",onChange:p=>F(p.target.files[0]),className:r.fileInput}),e.jsx("span",{className:r.fileUploadText,children:w?"✔ Dosya Seçildi":"Dosya Seçin..."})]})})]})]}),e.jsxs("div",{className:r.formSection,children:[e.jsx("h3",{className:r.sectionTitle,children:"Seçenekler"}),P("A",j,v,Q,V),P("B",g,m,U,J),P("C",u,b,M,W),P("D",c,i,t,S),P("E",I,A,L,X)]}),e.jsxs("div",{className:r.formSection,children:[e.jsx("h3",{className:r.sectionTitle,children:"Doğru Cevap"}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{className:r.inputLabel,children:"Seçenek Seçin"}),e.jsxs("select",{value:q,onChange:p=>R(p.target.value),className:r.selectInput,children:[e.jsx("option",{value:"",children:"Doğru cevabı seçin"}),e.jsx("option",{value:"1",children:"A"}),e.jsx("option",{value:"2",children:"B"}),e.jsx("option",{value:"3",children:"C"}),e.jsx("option",{value:"4",children:"D"}),e.jsx("option",{value:"5",children:"E"})]})]})]}),e.jsxs("div",{className:r.formSection,children:[e.jsx("h3",{className:r.sectionTitle,children:"Flashcard Bilgileri"}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{className:r.inputLabel,children:"FlashCard Front"}),e.jsx("textarea",{placeholder:"Flash kartın ön yüzü...",value:a,onChange:p=>$(p.target.value),rows:2,className:r.textArea})]}),e.jsxs("div",{className:r.formGroup,children:[e.jsx("label",{className:r.inputLabel,children:"FlashCard Back"}),e.jsx("textarea",{placeholder:"Flash kartın arka yüzü...",value:l,onChange:p=>O(p.target.value),rows:2,className:r.textArea})]})]}),e.jsxs("div",{className:r.actions,children:[e.jsx("button",{className:r.cancelButton,onClick:x,children:"İptal"}),e.jsx("button",{className:r.submitButton,onClick:se,children:"Soruyu Kaydet"})]})]})})},St="_modalOverlay_1z13y_1",Ct="_modalContent_1z13y_29",yt="_modalAppear_1z13y_1",Bt="_modalHeader_1z13y_59",kt="_closeButton_1z13y_91",Tt="_selectionSection_1z13y_125",Gt="_sectionTitle_1z13y_147",Dt="_formGroup_1z13y_165",$t="_inputLabel_1z13y_173",Lt="_selectInput_1z13y_189",zt="_textInput_1z13y_191",At="_textArea_1z13y_193",Ot="_questionsSection_1z13y_239",Et="_questionsList_1z13y_247",wt="_questionItem_1z13y_263",Ht="_selected_1z13y_291",Ft="_questionText_1z13y_301",qt="_deleteButton_1z13y_315",Mt="_editSection_1z13y_349",Kt="_formRow_1z13y_365",Qt="_optionRow_1z13y_377",Ut="_optionRadio_1z13y_389",Rt="_optionInput_1z13y_403",Pt="_correctAnswer_1z13y_429",Yt="_actions_1z13y_445",Vt="_submitButton_1z13y_463",Wt="_cancelButton_1z13y_465",Xt="_optionContainer_1z13y_551",Zt="_optionImageContainer_1z13y_567",Jt="_imagePreview_1z13y_579",es="_existingImage_1z13y_593",ts="_fileInput_1z13y_609",ss="_flashcardSection_1z13y_625",ns="_subSectionTitle_1z13y_641",as="_checkboxLabel_1z13y_655",os="_checkboxInput_1z13y_667",ls="_loadingSection_1z13y_811",is="_noQuestions_1z13y_825",o={modalOverlay:St,modalContent:Ct,modalAppear:yt,modalHeader:Bt,closeButton:kt,selectionSection:Tt,sectionTitle:Gt,formGroup:Dt,inputLabel:$t,selectInput:Lt,textInput:zt,textArea:At,questionsSection:Ot,questionsList:Et,questionItem:wt,selected:Ht,questionText:Ft,deleteButton:qt,editSection:Mt,formRow:Kt,optionRow:Qt,optionRadio:Ut,optionInput:Rt,correctAnswer:Pt,actions:Yt,submitButton:Vt,cancelButton:Wt,optionContainer:Xt,optionImageContainer:Zt,imagePreview:Jt,existingImage:es,fileInput:ts,flashcardSection:ss,subSectionTitle:ns,checkboxLabel:as,checkboxInput:os,loadingSection:ls,noQuestions:is},cs=({isOpen:C,onClose:x,onSubmit:N,onDelete:G,testTopics:d})=>{var M,W;const h=K(),{questions:_,status:j,error:v}=te(t=>t.question),{flashCards:g,status:m}=te(t=>t.flashCard),[u,b]=n.useState(""),[c,i]=n.useState(""),[I,A]=n.useState(""),[E,H]=n.useState([]),[q,R]=n.useState([]),[a,$]=n.useState(null),[l,O]=n.useState({questionID:null,questionText:"",options:["","","","",""],answer:0,flashCardFront:"",flashCardBack:"",removeFlashCard:!1,questionImage:null,optionAImage:null,optionBImage:null,optionCImage:null,optionDImage:null,optionEImage:null,existingImages:{}}),w=d==null?void 0:d.find(t=>t.topicID===parseInt(u)),F=(M=w==null?void 0:w.testGroups)==null?void 0:M.find(t=>t.testGroupID===parseInt(c));(W=F==null?void 0:F.tests)==null||W.find(t=>t.testID===parseInt(I)),n.useEffect(()=>{u&&(R((w==null?void 0:w.testGroups)||[]),i(""),A(""),H([]),$(null))},[u]),n.useEffect(()=>{c&&(H((F==null?void 0:F.tests)||[]),A(""),$(null))},[c]),n.useEffect(()=>{I?(h(ue(I)),$(null)):h({type:"question/fetchQuestionsByTestId/fulfilled",payload:[]})},[I,h]),n.useEffect(()=>{a&&a.questionID&&h(pe(a.questionID))},[a,h]),n.useEffect(()=>{if(a&&g.length>0){const t=g[0];O(S=>({...S,flashCardFront:t.front,flashCardBack:t.back}))}},[g,a]),n.useEffect(()=>{var t;if(a){const S={};(t=a.images)==null||t.forEach(L=>{const X={0:"question",1:"optionA",2:"optionB",3:"optionC",4:"optionD",5:"optionE"};X[L.type]!==void 0&&(S[X[L.type]]=L.imageUrl)}),O({questionID:a.questionID,questionText:a.text,options:[a.optionA||"",a.optionB||"",a.optionC||"",a.optionD||"",a.optionE||""],answer:a.answer-1,flashCardFront:"",flashCardBack:"",removeFlashCard:!1,questionImage:null,optionAImage:null,optionBImage:null,optionCImage:null,optionDImage:null,optionEImage:null,existingImages:S})}},[a]);const Q=(t,S)=>{const L=[...l.options];L[t]=S,O({...l,options:L})},V=(t,S)=>{O({...l,[t]:S,existingImages:{...l.existingImages,[t.split("Image")[0]]:null}})},U=async()=>{const t=new FormData;t.append("questionID",l.questionID),t.append("text",l.questionText),t.append("optionA",l.options[0]),t.append("optionB",l.options[1]),t.append("optionC",l.options[2]),t.append("optionD",l.options[3]),t.append("optionE",l.options[4]),t.append("answer",l.answer+1),l.questionImage&&t.append("questionImage",l.questionImage),l.optionAImage&&t.append("optionAImage",l.optionAImage),l.optionBImage&&t.append("optionBImage",l.optionBImage),l.optionCImage&&t.append("optionCImage",l.optionCImage),l.optionDImage&&t.append("optionDImage",l.optionDImage),l.optionEImage&&t.append("optionEImage",l.optionEImage),t.append("flashCardFront",l.flashCardFront||""),t.append("flashCardBack",l.flashCardBack||""),t.append("removeFlashCard",l.removeFlashCard);try{await h(me(t)).unwrap(),alert("Soru başarıyla güncellendi"),N(),x()}catch(S){console.error("Güncelleme hatası:",S),alert("Soru güncellenirken bir hata oluştu.")}},J=t=>{window.confirm("Bu soruyu silmek istediğinize emin misiniz?")&&alert("Silme işlemi simüle edildi (API entegrasyonu sonra eklenecek)")};return C?e.jsx("div",{className:o.modalOverlay,children:e.jsxs("div",{className:o.modalContent,children:[e.jsxs("div",{className:o.modalHeader,children:[e.jsx("h2",{children:"Soru Düzenle"}),e.jsx("button",{className:o.closeButton,onClick:x,children:"×"})]}),e.jsxs("div",{className:o.selectionSection,children:[e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{className:o.inputLabel,children:"Konu Seçin*"}),e.jsxs("select",{value:u,onChange:t=>b(t.target.value),className:o.selectInput,children:[e.jsx("option",{value:"",children:"Konu Seçin"}),d==null?void 0:d.map(t=>e.jsx("option",{value:t.topicID,children:t.name},t.topicID))]})]}),u&&e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{className:o.inputLabel,children:"Test Grubu Seçin*"}),e.jsxs("select",{value:c,onChange:t=>i(t.target.value),className:o.selectInput,children:[e.jsx("option",{value:"",children:"Test Grubu Seçin"}),w.testGroups.map(t=>e.jsx("option",{value:t.testGroupID,children:t.title},t.testGroupID))]})]}),c&&e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{className:o.inputLabel,children:"Test Seçin*"}),e.jsxs("select",{value:I,onChange:t=>A(t.target.value),className:o.selectInput,children:[e.jsx("option",{value:"",children:"Test Seçin"}),F.tests.map(t=>e.jsx("option",{value:t.testID,children:t.title},t.testID))]})]})]}),j==="loading"&&e.jsx("div",{className:o.loadingSection,children:e.jsx("p",{children:"Sorular yükleniyor..."})}),j==="succeeded"&&_.length>0&&e.jsxs("div",{className:o.questionsSection,children:[e.jsx("h3",{className:o.sectionTitle,children:"Sorular"}),e.jsx("div",{className:o.questionsList,children:_.map(t=>e.jsxs("div",{className:`${o.questionItem} ${(a==null?void 0:a.questionID)===t.questionID?o.selected:""}`,onClick:()=>$(t),children:[e.jsx("div",{className:o.questionText,children:t.text&&t.text.length>60?`${t.text.substring(0,60)}...`:t.text||"Metinsiz soru"}),e.jsx("button",{className:o.deleteButton,onClick:S=>{S.stopPropagation(),J(t.questionID)},children:"Sil"})]},t.questionID))})]}),j==="succeeded"&&_.length===0&&I&&e.jsx("div",{className:o.noQuestions,children:e.jsx("p",{children:"Bu test için soru bulunamadı"})}),j==="failed"&&e.jsx("div",{className:o.errorSection,children:e.jsxs("p",{children:["Hata: ",v||"Soru yüklenirken bir hata oluştu"]})}),a&&e.jsxs("div",{className:o.editSection,children:[e.jsx("h3",{className:o.sectionTitle,children:"Soru Düzenle"}),e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{className:o.inputLabel,children:"Soru Metni*"}),e.jsx("textarea",{value:l.questionText,onChange:t=>O({...l,questionText:t.target.value}),className:o.textArea,rows:3})]}),e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{className:o.inputLabel,children:"Soru Görseli"}),l.existingImages.question&&e.jsxs("div",{className:o.imagePreview,children:[e.jsx("img",{src:l.existingImages.question,alt:"Mevcut soru görseli",className:o.existingImage}),e.jsx("span",{children:"Mevcut Görsel"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>V("questionImage",t.target.files[0]),className:o.fileInput})]}),e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{className:o.inputLabel,children:"Seçenekler*"}),l.options.map((t,S)=>e.jsxs("div",{className:o.optionContainer,children:[e.jsxs("div",{className:o.optionRow,children:[e.jsx("input",{type:"radio",name:"correctAnswer",checked:l.answer===S,onChange:()=>O({...l,answer:S}),className:o.optionRadio}),e.jsx("input",{type:"text",value:t,onChange:L=>Q(S,L.target.value),className:o.optionInput,placeholder:`${String.fromCharCode(65+S)} Seçeneği`})]}),e.jsxs("div",{className:o.optionImageContainer,children:[l.existingImages[`option${String.fromCharCode(65+S)}`]&&e.jsxs("div",{className:o.imagePreview,children:[e.jsx("img",{src:l.existingImages[`option${String.fromCharCode(65+S)}`],alt:`${String.fromCharCode(65+S)} seçeneği mevcut görsel`,className:o.existingImage}),e.jsx("span",{children:"Mevcut"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:L=>V(`option${String.fromCharCode(65+S)}Image`,L.target.files[0]),className:o.fileInput})]})]},S))]}),e.jsxs("div",{className:o.flashcardSection,children:[e.jsx("h4",{className:o.subSectionTitle,children:"Bilgi Kartı"}),m==="loading"&&e.jsx("p",{children:"Bilgi kartı yükleniyor..."}),m==="succeeded"&&g.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{className:o.inputLabel,children:"Ön Yüz"}),e.jsx("input",{type:"text",value:l.flashCardFront,onChange:t=>O({...l,flashCardFront:t.target.value}),className:o.textInput,placeholder:"Bilgi kartının ön yüzü"})]}),e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{className:o.inputLabel,children:"Arka Yüz"}),e.jsx("textarea",{value:l.flashCardBack,onChange:t=>O({...l,flashCardBack:t.target.value}),className:o.textArea,rows:2,placeholder:"Bilgi kartının arka yüzü"})]}),e.jsx("div",{className:o.formGroup,children:e.jsxs("label",{className:o.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:l.removeFlashCard,onChange:t=>O({...l,removeFlashCard:t.target.checked}),className:o.checkboxInput}),"Bilgi kartını kaldır"]})})]}),m==="succeeded"&&g.length===0&&e.jsx("p",{children:"Bu soru için bilgi kartı bulunamadı"}),m==="failed"&&e.jsx("p",{children:"Bilgi kartı yüklenirken hata oluştu"})]})]}),e.jsxs("div",{className:o.actions,children:[e.jsx("button",{className:o.cancelButton,onClick:x,children:"İptal"}),e.jsx("button",{className:o.submitButton,onClick:U,disabled:!a,children:"Güncelle"})]})]})}):null},rs="_modalOverlay_158eh_1",ds="_modalContent_158eh_31",us="_slideIn_158eh_1",ps="_modalHeader_158eh_61",ms="_closeButton_158eh_95",hs="_formSection_158eh_129",xs="_formGroup_158eh_147",_s="_inputLabel_158eh_163",fs="_textInput_158eh_179",js="_textArea_158eh_181",Is="_actions_158eh_237",vs="_submitButton_158eh_257",gs="_cancelButton_158eh_259",z={modalOverlay:rs,modalContent:ds,slideIn:us,modalHeader:ps,closeButton:ms,formSection:hs,formGroup:xs,inputLabel:_s,textInput:fs,textArea:js,actions:Is,submitButton:vs,cancelButton:gs},bs=({isOpen:C,onClose:x,tests:N})=>{const G=K(),[d,h]=n.useState({title:"",description:"",testGruopID:null}),j=N.flatMap(c=>c.testGroups||[]),[v,g]=n.useState(""),m=c=>{const{name:i,value:I}=c.target;h(A=>({...A,[i]:I}))},u=c=>{const i=parseInt(c.target.value,10);g(i),h(I=>({...I,testGruopID:i}))},b=async()=>{if(!d.title.trim()||!d.testGruopID){alert("Lütfen test başlığı girin ve bir test grubu seçin.");return}try{await G(he(d)).unwrap(),alert("Test başarıyla oluşturuldu!"),x()}catch(c){alert("Test oluşturulamadı: "+c)}};return C?e.jsx("div",{className:z.modalOverlay,children:e.jsxs("div",{className:z.modalContent,children:[e.jsxs("div",{className:z.modalHeader,children:[e.jsx("h2",{children:"Yeni Test Ekle"}),e.jsx("button",{onClick:x,className:z.closeButton,children:"×"})]}),e.jsxs("div",{className:z.formSection,children:[e.jsxs("div",{className:z.formGroup,children:[e.jsx("label",{className:z.inputLabel,children:"Test Başlığı*"}),e.jsx("input",{type:"text",name:"title",placeholder:"Test başlığını girin",value:d.title,onChange:m,className:z.textInput})]}),e.jsxs("div",{className:z.formGroup,children:[e.jsx("label",{className:z.inputLabel,children:"Açıklama"}),e.jsx("textarea",{name:"description",placeholder:"Test açıklaması (opsiyonel)",value:d.description,onChange:m,className:z.textArea})]}),e.jsxs("div",{className:z.formGroup,children:[e.jsx("label",{className:z.inputLabel,children:"Test Grubu Seçimi*"}),e.jsxs("select",{value:d.testGroupID,onChange:u,className:z.textInput,children:[e.jsx("option",{value:"",children:"Bir test grubu seçin"}),j.map(c=>e.jsxs("option",{value:c.testGroupID,children:[c.title," - ",c.description]},c.testGroupID))]})]})]}),e.jsxs("div",{className:z.actions,children:[e.jsx("button",{className:z.cancelButton,onClick:x,children:"İptal"}),e.jsx("button",{className:z.submitButton,onClick:b,children:"Kaydet"})]})]})}):null},Ns="_modalOverlay_14299_1",Ss="_modalContent_14299_31",Cs="_slideIn_14299_1",ys="_modalHeader_14299_63",Bs="_closeButton_14299_97",ks="_formSection_14299_131",Ts="_formGroup_14299_149",Gs="_inputLabel_14299_165",Ds="_textInput_14299_181",$s="_textArea_14299_183",Ls="_helpText_14299_239",zs="_actions_14299_251",As="_submitButton_14299_271",Os="_cancelButton_14299_273",T={modalOverlay:Ns,modalContent:Ss,slideIn:Cs,modalHeader:ys,closeButton:Bs,formSection:ks,formGroup:Ts,inputLabel:Gs,textInput:Ds,textArea:$s,helpText:Ls,actions:zs,submitButton:As,cancelButton:Os},Es=({isOpen:C,onClose:x,selectedCourseID:N,testTopics:G})=>{const d=K(),[h,_]=n.useState(""),[j,v]=n.useState({name:"",description:"",videoLink:""});n.useEffect(()=>{const u=G.find(b=>b.topicID===parseInt(h));u&&v({name:u.name||"",description:u.description||"",videoLink:u.videoLink||""})},[h,G]);const g=u=>{const{name:b,value:c}=u.target;v(i=>({...i,[b]:c}))},m=async()=>{if(!j.name.trim()||!N||!h){alert("Gerekli bilgiler eksik.");return}const u={topicID:parseInt(h),name:j.name,description:j.description,videoLink:j.videoLink};try{await d(xe(u)).unwrap(),alert("Konu başarıyla güncellendi!"),x()}catch(b){alert("Konu güncellenirken hata oluştu: "+b)}};return C?e.jsx("div",{className:T.modalOverlay,children:e.jsxs("div",{className:T.modalContent,children:[e.jsxs("div",{className:T.modalHeader,children:[e.jsx("h2",{children:"Konu Düzenle"}),e.jsx("button",{onClick:x,className:T.closeButton,children:"×"})]}),e.jsxs("div",{className:T.formSection,children:[e.jsxs("div",{className:T.formGroup,children:[e.jsx("label",{className:T.inputLabel,children:"Konu Seçiniz*"}),e.jsxs("select",{value:h,onChange:u=>_(u.target.value),className:T.textInput,children:[e.jsx("option",{value:"",children:"Bir konu seçin"}),G.map(u=>e.jsx("option",{value:u.topicID,children:u.name},u.topicID))]})]}),e.jsxs("div",{className:T.formGroup,children:[e.jsx("label",{className:T.inputLabel,children:"Konu Adı*"}),e.jsx("input",{type:"text",name:"name",placeholder:"Konu adını güncelleyin",value:j.name,onChange:g,className:T.textInput,disabled:!h})]}),e.jsxs("div",{className:T.formGroup,children:[e.jsx("label",{className:T.inputLabel,children:"Açıklama"}),e.jsx("textarea",{name:"description",placeholder:"Konu açıklamasını güncelleyin",value:j.description,onChange:g,className:T.textArea,disabled:!h})]}),e.jsxs("div",{className:T.formGroup,children:[e.jsx("label",{className:T.inputLabel,children:"Video Linki"}),e.jsx("input",{type:"text",name:"videoLink",placeholder:"https://ornek.com/video",value:j.videoLink,onChange:g,className:T.textInput,disabled:!h}),e.jsx("div",{className:T.helpText,children:"YouTube, Vimeo veya diğer platformlardan link"})]})]}),e.jsxs("div",{className:T.actions,children:[e.jsx("button",{className:T.cancelButton,onClick:x,children:"İptal"}),e.jsx("button",{className:T.submitButton,onClick:m,disabled:!h,children:"Güncelle"})]})]})}):null},ws="_modalOverlay_1fdar_1",Hs="_modalContent_1fdar_27",Fs="_modalHeader_1fdar_49",qs="_closeButton_1fdar_77",Ms="_formSection_1fdar_105",Ks="_formGroup_1fdar_113",Qs="_inputLabel_1fdar_125",Us="_textInput_1fdar_141",Rs="_textArea_1fdar_143",Ps="_actions_1fdar_195",Ys="_cancelButton_1fdar_209",Vs="_submitButton_1fdar_211",B={modalOverlay:ws,modalContent:Hs,modalHeader:Fs,closeButton:qs,formSection:Ms,formGroup:Ks,inputLabel:Qs,textInput:Us,textArea:Rs,actions:Ps,cancelButton:Ys,submitButton:Vs},Ws=({isOpen:C,onClose:x,tests:N})=>{console.log(N);const G=K(),[d,h]=n.useState([]),[_,j]=n.useState(""),[v,g]=n.useState(""),[m,u]=n.useState(""),[b,c]=n.useState({title:"",description:""});n.useEffect(()=>{Array.isArray(N)&&h(N)},[N]),n.useEffect(()=>{const a=i();c(a?{title:a.title||"",description:a.description||""}:{title:"",description:""})},[m]);const i=()=>{const a=d.find(l=>l.topicID===parseInt(_)),$=a==null?void 0:a.testGroups.find(l=>l.testGroupID===parseInt(v));return $==null?void 0:$.tests.find(l=>l.testID===parseInt(m))},I=a=>{const{name:$,value:l}=a.target;c(O=>({...O,[$]:l}))},A=async()=>{if(!m||!b.title.trim()){alert("Test başlığı boş olamaz.");return}const a={testID:parseInt(m),title:b.title.trim(),description:b.description.trim()};try{await G(_e(a)).unwrap(),alert("Test başarıyla güncellendi!"),x()}catch($){alert("Test güncellenirken hata oluştu: "+($.message||$))}};if(!C)return null;const E=d.find(a=>a.topicID===parseInt(_)),H=(E==null?void 0:E.testGroups)||[],q=H.find(a=>a.testGroupID===parseInt(v)),R=(q==null?void 0:q.tests)||[];return e.jsx("div",{className:B.modalOverlay,children:e.jsxs("div",{className:B.modalContent,children:[e.jsxs("header",{className:B.modalHeader,children:[e.jsx("h2",{children:"Testi Düzenle"}),e.jsx("button",{onClick:x,className:B.closeButton,"aria-label":"Kapat",children:"×"})]}),e.jsxs("section",{className:B.formSection,children:[e.jsxs("div",{className:B.formGroup,children:[e.jsx("label",{className:B.inputLabel,children:"Konu Seçiniz*"}),e.jsxs("select",{value:_,onChange:a=>{j(a.target.value),g(""),u("")},className:B.textInput,children:[e.jsx("option",{value:"",children:"Bir konu seçin"}),d.map(a=>e.jsx("option",{value:a.topicID,children:a.name},a.topicID))]})]}),_&&e.jsxs("div",{className:B.formGroup,children:[e.jsx("label",{className:B.inputLabel,children:"Test Grubu Seçiniz*"}),e.jsxs("select",{value:v,onChange:a=>{g(a.target.value),u("")},className:B.textInput,children:[e.jsx("option",{value:"",children:"Bir grup seçin"}),H.map(a=>e.jsx("option",{value:a.testGroupID,children:a.title},a.testGroupID))]})]}),v&&e.jsxs("div",{className:B.formGroup,children:[e.jsx("label",{className:B.inputLabel,children:"Test Seçiniz*"}),e.jsxs("select",{value:m,onChange:a=>u(a.target.value),className:B.textInput,children:[e.jsx("option",{value:"",children:"Bir test seçin"}),R.map(a=>e.jsx("option",{value:a.testID,children:a.title},a.testID))]})]}),m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:B.formGroup,children:[e.jsx("label",{className:B.inputLabel,children:"Test Başlığı*"}),e.jsx("input",{name:"title",type:"text",value:b.title,onChange:I,className:B.textInput,placeholder:"Test başlığını güncelleyin"})]}),e.jsxs("div",{className:B.formGroup,children:[e.jsx("label",{className:B.inputLabel,children:"Açıklama"}),e.jsx("textarea",{name:"description",value:b.description,onChange:I,className:B.textArea,placeholder:"Test açıklamasını güncelleyin"})]})]})]}),e.jsxs("footer",{className:B.actions,children:[e.jsx("button",{className:B.cancelButton,onClick:x,children:"İptal"}),e.jsx("button",{className:B.submitButton,onClick:A,disabled:!m||!b.title.trim(),children:"Güncelle"})]})]})})},Xs="_modalOverlay_1fdar_1",Zs="_modalContent_1fdar_27",Js="_modalHeader_1fdar_49",en="_closeButton_1fdar_77",tn="_formSection_1fdar_105",sn="_formGroup_1fdar_113",nn="_inputLabel_1fdar_125",an="_textInput_1fdar_141",on="_textArea_1fdar_143",ln="_actions_1fdar_195",cn="_cancelButton_1fdar_209",rn="_submitButton_1fdar_211",k={modalOverlay:Xs,modalContent:Zs,modalHeader:Js,closeButton:en,formSection:tn,formGroup:sn,inputLabel:nn,textInput:an,textArea:on,actions:ln,cancelButton:cn,submitButton:rn},dn=({isOpen:C,onClose:x,topics:N})=>{const G=K(),[d,h]=n.useState(""),[_,j]=n.useState(""),[v,g]=n.useState({title:"",description:"",test:""}),[m,u]=n.useState([]);n.useEffect(()=>{if(!d){u([]),j(""),g({title:"",description:"",test:""});return}const i=N.find(I=>I.topicID==d);i&&i.testGroups?u(i.testGroups):u([]),j(""),g({title:"",description:"",test:""})},[d,N]),n.useEffect(()=>{if(!_||m.length===0){g({title:"",description:"",test:""});return}const i=m.find(I=>I.testGroupID==_);i&&g({title:i.title||"",description:i.description||"",test:i.test||""})},[_,m]);const b=i=>{const{name:I,value:A}=i.target;g(E=>({...E,[I]:A}))},c=async()=>{if(!_){alert("Lütfen bir test grubu seçin.");return}if(!v.title.trim()){alert("Grup başlığı boş olamaz.");return}const i={testGroupID:Number(_),title:v.title.trim(),description:v.description.trim(),test:v.test.trim()};try{await G(fe(i)).unwrap(),alert("Test grubu başarıyla güncellendi!"),x()}catch(I){alert("Test grubu güncellenirken hata oluştu: "+(I.message||I))}};return C?e.jsx("div",{className:k.modalOverlay,children:e.jsxs("div",{className:k.modalContent,children:[e.jsxs("header",{className:k.modalHeader,children:[e.jsx("h2",{children:"Test Grubunu Düzenle"}),e.jsx("button",{onClick:x,className:k.closeButton,"aria-label":"Kapat",children:"×"})]}),e.jsxs("section",{className:k.formSection,children:[e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{className:k.inputLabel,children:"Konu Seçimi*"}),e.jsxs("select",{value:d,onChange:i=>h(i.target.value),className:k.textInput,children:[e.jsx("option",{value:"",children:"Bir konu seçin"}),N.map(i=>e.jsx("option",{value:i.topicID,children:i.name},i.topicID))]})]}),d&&e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{className:k.inputLabel,children:"Test Grubu Seçimi*"}),e.jsxs("select",{value:_,onChange:i=>j(i.target.value),className:k.textInput,children:[e.jsx("option",{value:"",children:"Bir grup seçin"}),m.map(i=>e.jsx("option",{value:i.testGroupID,children:i.title},i.testGroupID))]})]}),_&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{className:k.inputLabel,children:"Grup Başlığı*"}),e.jsx("input",{name:"title",type:"text",value:v.title,onChange:b,className:k.textInput,placeholder:"Grup başlığını güncelleyin"})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{className:k.inputLabel,children:"Açıklama"}),e.jsx("textarea",{name:"description",value:v.description,onChange:b,className:k.textArea,placeholder:"Grup açıklamasını güncelleyin",rows:4})]}),e.jsxs("div",{className:k.formGroup,children:[e.jsx("label",{className:k.inputLabel,children:"Test*"}),e.jsx("input",{name:"test",type:"text",value:v.test,onChange:b,className:k.textInput,placeholder:"Test değerini girin"})]})]})]}),e.jsxs("footer",{className:k.actions,children:[e.jsx("button",{className:k.cancelButton,onClick:x,children:"İptal"}),e.jsx("button",{className:k.submitButton,onClick:c,disabled:!_||!v.title.trim()||!v.test.trim(),children:"Güncelle"})]})]})}):null},un="_questionPage_1tguh_1",pn="_header_1tguh_13",mn="_selectionFlow_1tguh_49",hn="_selectionStep_1tguh_61",xn="_completed_1tguh_81",_n="_stepHeader_1tguh_91",fn="_stepIndicator_1tguh_105",jn="_optionsContainer_1tguh_153",In="_optionCard_1tguh_165",vn="_selected_1tguh_205",gn="_optionIcon_1tguh_219",bn="_optionLabel_1tguh_257",Nn="_resetContainer_1tguh_277",Sn="_resetButton_1tguh_291",f={questionPage:un,header:pn,selectionFlow:mn,selectionStep:hn,completed:xn,stepHeader:_n,stepIndicator:fn,optionsContainer:jn,optionCard:In,selected:vn,optionIcon:gn,optionLabel:bn,resetContainer:Nn,resetButton:Sn},kn=()=>{var ie;const C=K(),{options:x,status:N,error:G}=te(s=>s.exam),{courses:d,fetchStatus:h,fetchError:_}=te(s=>s.courses),{topics:j,status:v,error:g}=te(s=>s.topic),[m,u]=n.useState(null),[b,c]=n.useState(null),[i,I]=n.useState(null),[A,E]=n.useState(null),[H,q]=n.useState([]),[R,a]=n.useState(!1),[$,l]=n.useState(!1),[O,w]=n.useState(!1),[F,Q]=n.useState(!1),[V,U]=n.useState(!1),[J,M]=n.useState(!1),[W,t]=n.useState(!1),[S,L]=n.useState(!1),X=["Konu Ekle","Konu Düzenle","Test Grubu Ekle","Test Grubu Düzenle","Test Ekle","Test Düzenle","Soru Ekle","Soru Düzenle"];n.useEffect(()=>{N==="idle"&&C(je())},[C,N]),n.useEffect(()=>{b&&C(Ie(b))},[C,b]),n.useEffect(()=>{const s=d.find(Y=>Y.name===i);s!=null&&s.courseID&&C(ve(s.courseID))},[C,i,d]),n.useEffect(()=>{const s=d.find(Y=>Y.name===i);s!=null&&s.courseID&&C(ge(s.courseID)).unwrap().then(Y=>q(Y)).catch(Y=>console.error("Hata:",Y))},[C,i,d]);const se=((ie=d.find(s=>s.name===i))==null?void 0:ie.courseID)||null,P=j.filter(s=>s.tests&&s.tests.length>0).flatMap(s=>s.tests),p=s=>{E(s),s==="Konu Ekle"?a(!0):s==="Test Grubu Ekle"?l(!0):s==="Test Grubu Düzenle"?L(!0):s==="Soru Ekle"?w(!0):s==="Soru Düzenle"?Q(!0):s==="Test Ekle"?U(!0):s==="Konu Düzenle"?M(!0):s==="Test Düzenle"&&t(!0)},Z=()=>{u(null),c(null),I(null),E(null)},ne=s=>console.log("Eklenecek Test Grubu:",s),ae=s=>console.log("Eklenecek Soru:",s),oe=s=>console.log("Güncellenen Soru:",s),ee=s=>{console.log("Silinecek Soru ID:",s),alert(`Soru (ID: ${s}) silindi!`)},le=s=>{console.log("Güncellenen Test:",s)};return e.jsx(be,{children:e.jsxs("div",{className:f.questionPage,children:[e.jsx("div",{className:f.header,children:e.jsx("p",{children:"Sınav, konu ve işlem seçerek soru yönetimini gerçekleştirin"})}),e.jsxs("div",{className:`${f.selectionStep} ${m?f.completed:""}`,children:[e.jsxs("div",{className:f.stepHeader,children:[e.jsx("div",{className:f.stepIndicator,children:"1"}),e.jsx("h2",{children:"Sınav Seçin"})]}),e.jsxs("div",{className:f.optionsContainer,children:[N==="loading"&&e.jsx("p",{children:"Yükleniyor..."}),N==="failed"&&e.jsxs("p",{children:["Hata: ",G]}),N==="succeeded"&&x.map(s=>e.jsxs("div",{className:`${f.optionCard} ${m===s.name?f.selected:""}`,onClick:()=>{u(s.name),c(s.examID),I(null),E(null)},children:[e.jsx("div",{className:f.optionIcon,children:s.name[0]}),e.jsx("div",{className:f.optionLabel,children:s.name})]},s.id))]})]}),m&&e.jsxs("div",{className:`${f.selectionStep} ${i?f.completed:""}`,children:[e.jsxs("div",{className:f.stepHeader,children:[e.jsx("div",{className:f.stepIndicator,children:"2"}),e.jsx("h2",{children:"Ders Seçin"})]}),e.jsxs("div",{className:f.optionsContainer,children:[h==="loading"&&e.jsx("p",{children:"Yükleniyor..."}),h==="failed"&&e.jsxs("p",{children:["Hata: ",_]}),h==="succeeded"&&d.map(s=>e.jsxs("div",{className:`${f.optionCard} ${i===s.name?f.selected:""}`,onClick:()=>{I(s.name),E(null)},children:[e.jsx("div",{className:f.optionIcon,children:s.name[0]}),e.jsx("div",{className:f.optionLabel,children:s.name})]},s.id))]})]}),i&&e.jsxs("div",{className:`${f.selectionStep} ${A?f.completed:""}`,children:[e.jsxs("div",{className:f.stepHeader,children:[e.jsx("div",{className:f.stepIndicator,children:"3"}),e.jsx("h2",{children:"İşlem Seçin"})]}),e.jsx("div",{className:f.optionsContainer,children:X.map(s=>e.jsxs("div",{className:`${f.optionCard} ${A===s?f.selected:""}`,onClick:()=>p(s),children:[e.jsxs("div",{className:f.optionIcon,children:[s==="Konu Ekle"&&"📚",s==="Konu Düzenle"&&"🛠️",s==="Test Grubu Ekle"&&"📝",s==="Test Grubu Düzenle"&&"🛠️",s==="Test Ekle"&&"✏️",s==="Test Düzenle"&&"🛠️",s==="Soru Ekle"&&"✏️",s==="Soru Düzenle"&&"🛠️"]}),e.jsx("div",{className:f.optionLabel,children:s})]},s))})]}),(m||i||A)&&e.jsx("div",{className:f.resetContainer,children:e.jsx("button",{className:f.resetButton,onClick:Z,children:"Seçimleri Sıfırla"})}),e.jsx(we,{isOpen:R,onClose:()=>a(!1),selectedCourseID:se}),e.jsx(et,{isOpen:$,onClose:()=>l(!1),onSubmit:ne,availableTopics:j}),e.jsx(Nt,{isOpen:O,onClose:()=>w(!1),onSubmit:ae,tests:P}),e.jsx(bs,{isOpen:V,onClose:()=>U(!1),tests:H,onSubmit:s=>console.log("Eklenecek Test:",s)}),e.jsx(cs,{isOpen:F,onClose:()=>Q(!1),onSubmit:oe,onDelete:ee,testTopics:H}),e.jsx(Es,{isOpen:J,onClose:()=>M(!1),selectedCourseID:se,testTopics:H}),e.jsx(Ws,{isOpen:W,onClose:()=>S(!1),onSubmit:le,tests:H}),e.jsx(dn,{isOpen:S,onClose:()=>L(!1),onSubmit:le,topics:H})]})})};export{kn as default};
